

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8"/>
    <title>Des articles sur Magento et plein d'autres choses ! - Jacques Bodin-Hullin, développeur Magento</title>
    
    
    <meta name="author" content="Jacques Bodin-Hullin">
    <link href="/css/style.css" rel="stylesheet" type="text/css" />
    <link href="/css/pygments.css" rel="stylesheet" type="text/css" media="all">
    <link href="/js/fancybox/jquery.fancybox.css" rel="stylesheet" type="text/css" media="all">
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="favicon.ico">
  <!-- Update these with your own images
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
    <link rel="alternate" type="application/rss+xml" title="Jacques Bodin-Hullin - Latest Posts" href="/atom.xml" >

    <script type="text/javascript" src="/js/jquery-1.10.2.min.js" ></script>
    <script type="text/javascript" src="/js/fancybox/jquery.fancybox.pack.js" ></script>
    <script type="text/javascript" src="/js/event.js" ></script>
    <script type="text/javascript" src="/js/functions.js" ></script>

    <style for="gists"></style>
</head>
<body class="">

<div id="mainWrap">

    <div id="topWrap">
        <div id="headerWrap">
            <p>
                Jacques Bodin-Hullin
                <span class="baseline">Développeur d'applications Web</span>
            </p>
            <a href="http://jacques.sh"></a>

            <div id="magento_certified">
                <a href="http://www.magentocommerce.com/certification/directory/dev/69536/" title="Jacques Bodin-Hullin, développeur certifié Magento Developer" class="developer" target="_blank"></a>
                <a href="http://www.magentocommerce.com/certification/directory/dev/69536/" title="L'Agence Monsieur Biz est certifiée Magento Developer Plus" class="developer-plus" target="_blank"></a>
                <a href="http://www.magentocommerce.com/certification/directory/dev/69536/" title="Jacques Bodin-Hullin est développeur certifié Magento Front End Developer" class="frontend-developer" target="_blank"></a>
            </div>

        </div>

        <blockquote id="quoteWrap">
            
            <p>
                La perfection est atteinte non quand il ne reste rien à ajouter, mais quand il ne reste
                rien à enlever.
            </p>
            <div><cite>Antoine de Saint Exupéry</cite></div>
            
        </blockquote>

        <ul id="menu">
            
            <li><a href="/"><span></span>Accueil</a></li>
            
            <li><a href="https://github.com/jacquesbh" target="_blank"><span></span>Code</a></li>
            
            
    
        
    

    
        
            
            <li><a href="/a-propos.html"><span></span>A propos</a></li>
            
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
            
            <li><a href="/references.html"><span></span>Références</a></li>
            
        
    

    
        
    

    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    




            <li class="search">
                <form action="/search.html" method="get" id="search_form">
                    <div>
                        <input type="text" name="q" placeholder="Votre recherche" />
                    </div>
                </form>
            </li>
        </ul>

        <div class="mbiz">
            <p>
                <a href="http://monsieurbiz.com" title="Découvrez l'agence Monsieur Biz, spécialiste Magento">
                    <img src="/img/monsieurbiz_bg.png" title="L'Agence Monsieur Biz" />
                    <span>Vous cherchez une agence à taille humaine spécialisée sur la solution e-commerce Magento ? L'agence Monsieur Biz est faite pour vous.</span>
                </a>
            </p>
        </div>
    </div>

    <div id="globalWrap">



<div id="sideWrap">

<h2>A propos</h2>
<div>
    <img src="/img/visage_edito.png" alt="" width="277" height="88" />
    <p>Bienvenue sur mon blog !</p>
    <p>Je suis <a href="/a-propos.html">Jacques Bodin-Hullin, développeur PHP confirmé, certifié Magento</a>.</p>
    <p>Ce blog est dédié au développement, PHP essentiellement, Javascript un peu, et tout le reste, évidemment !</p>
    <p>N'hésitez pas à aller faire un tour <a href="https://github.com/jacquesbh">sur mon github</a> afin de suivre mes projets et à poster vos remarques sur les articles que vous trouvez ici, c'est toujours constructif !</p>
    <p>J'espère que vous trouverez ici l'information que vous cherchez.</p>
</div>

<div>
    <p>Et sinon, en journée je suis <a href="http://monsieurbiz.com">Directeur technique chez Monsieur Biz, une agence spécialisée Magento</a>.</p>
</div>

<hr />




<h2>Tags</h2>

<p class="tags">

    <span style="font-size:14.4px"><a href="/search.html#!tag=Jekyll">Jekyll</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Markdown">Markdown</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=GitHub">GitHub</a></span>

    <span style="font-size:37.2px"><a href="/search.html#!tag=Magento">Magento</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Snippets">Snippets</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Vim">Vim</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Netbeans">Netbeans</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=jQuery">jQuery</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Javascript">Javascript</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=PHP">PHP</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=URL">URL</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=Bonnes pratiques">Bonnes pratiques</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Ajax">Ajax</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Homepage">Homepage</a></span>

    <span style="font-size:16.8px"><a href="/search.html#!tag=Layout">Layout</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=CMS">CMS</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=The Installer">The Installer</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Android">Android</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Proxy">Proxy</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=HTTP">HTTP</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Git">Git</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Workflow">Workflow</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=Cache">Cache</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Block">Block</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=Module">Module</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Cart">Cart</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Customer">Customer</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Handle">Handle</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Events">Events</a></span>

    <span style="font-size:15.6px"><a href="/search.html#!tag=Attributes">Attributes</a></span>

    <span style="font-size:15.6px"><a href="/search.html#!tag=Product">Product</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Product type">Product type</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=EAV">EAV</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Thème">Thème</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=MariaDB">MariaDB</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=MySQL">MySQL</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Images">Images</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Aides de vue">Aides de vue</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=OS X">OS X</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Astuces">Astuces</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=MageConf">MageConf</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Émulation">Émulation</a></span>

</p>

<hr />



</div>


<div id="contentWrap">

    


    <hr />
    <h2><a href="/2013/01/un-site-avec-jekyll-rapidement.html">Un blog avec Jekyll et GitHub</a></h2>
    <div class="content post">
        <p>L'occasion de faire un petit blog ou un site un poil dynamique n'est pas rare dans notre métier.</p>

<p>Voici une manière rapide de faire un blog simple :</p>

<ul>
<li>interface d'administration

<ul>
<li>gestion des utilisateurs</li>
</ul>
</li>
<li>blog statique

<ul>
<li>versionnement des articles</li>
<li>commentaires (avec <a href="http://disqus.com/">Disqus</a>)</li>
<li>catégories</li>
<li>tags</li>
</ul>
</li>
</ul>


<p>Pour le rendu du blog, c'est <a href="http://jekyllrb.com/">Jekyll</a>.</p>

<p>Pour l'interface d'administration, c'est <a href="https://github.com/">GitHub</a>.</p>

<!-- 


<hr />

<p><a href="http://jekyllrb.com/">Jekyll</a> est un générateur de blog statique.</p>

<p><a href="https://github.com/">GitHub</a> permet à un utilisateur d'avoir des URL telles que <em>http://utilisateur.github.com/projet</em> avec ses fameuses <a href="http://pages.github.com/">Pages Github</a>.</p>

<p>Et comme tout projet sur GitHub, on peut y avoir une gestion des collaborateurs. Un collaborateur devient donc un utilisateur dans notre cas.</p>

<p>Les <em>Pages</em> sur GitHub peuvent fonctionner avec Jekyll. C'est d'ailleurs le cas par défaut.</p>

<p>Il nous suffit donc de créer un projet sur GitHub, de créer la branche <code>gh-pages</code> et d'y mettre à l'intérieur : notre blog.</p>

<p>Je vous laisse créer votre projet, le cloner, et vous déplacer sur la branche <code>gh-pages</code>.</p>

<h2>Configuration</h2>

<p>Il nous faut initialiser notre blog :</p>

<script type="text/javascript">gist(4526322, 'misc/init.sh');</script>


<p>La <a href="https://github.com/mojombo/jekyll/wiki/Configuration">configuration de Jekyll</a> est contenu dans le fichier <code>_config.yml</code>.</p>

<p>Par défaut GitHub force les valeurs suivantes :</p>

<pre><code>safe: true
source: &lt;your pages repo&gt;
destination: &lt;the build dir&gt;
lsi: false
pygments: true
</code></pre>

<p>A partir de là vous n'avez pas le choix de la source et de la destination de vos pages. Vous ne pouvez pas non plus utiliser de plugins personnalisés ; Et la coloration syntaxique avec le tag <code>highlight</code> est possible et elle utilise <a href="http://pygments.org/">Pygments</a>.</p>

<p>Mais nous pouvons tout de même personnaliser quelques éléments :</p>

<script type="text/javascript">gist(4526322, '_config.yml');</script>


<p>La configuration n'est pas bien compliquée à comprendre. Il s'agit d'un fichier en <code>YAML</code>, c'est donc une liste de clés/valeurs, tout simplement.</p>

<h2>Le format d'une page avec Jekyll</h2>

<p>Tout fichier texte peut-être transformé par Jekyll. Il suffit d'y inclure le "header" qui va bien, exemple :</p>

<script type="text/javascript">gist(4526322, 'misc/header_example.txt', 4);</script>


<p>La date de publication permet de décider de la date de parution de notre article, à condition que la configuration <code>future</code> soit à <code>false</code>.</p>

<p>Le header d'un fichier "Jekyll" commence et se termine par <code>---</code>. A l'intérieur du header vous pouvez y mettre ce que vous voulez : ces valeurs seront récupérables.
On peut par exemple imaginer une variable <code>comments: true</code> ou <code>false</code> qui nous permette ensuite dans le HTML de la page de déterminer si on doit, ou non, afficher les commentaires.</p>

<h2>Notre page principale</h2>

<p>Comme tout site qui se respecte on a un <code>index.html</code>. Ici, c'est pareil. On peut également le nommer <code>index.md</code> mais dans ce cas il sera, en plus d'être parsé par Jekyll, parsé par le moteur Markdown. Et pour un fichier qui va contenir un HTML bien spécifique c'est un peu lourd de faire passer markdown par là.</p>

<p>On va décider que notre page d'accueil aura un <code>layout</code> standard qu'on pourra réutiliser : <code>default</code>.</p>

<p>Je vous explique plus bas ce qu'est le layout, mais vous allez voir, c'est très simple à comprendre !</p>

<p>En attendant notre page d'accueil doit boucler sur les posts, qui ont une pagination (on doit donc gérer cette pagination).</p>

<script type="text/javascript">gist(4526322, 'index.html');</script>


<p>Les conditions sont simples à comprendre. Par contre effectivement c'est pas super bien indenté... Sauf que si j'indente plus le code on va se retrouver avec des pages dont le HTML reçu par le serveur contiendra des tonnes d'espaces. Car les <code>{% if ... %}</code> sont supprimés, mais pas les espaces avant !</p>

<p>On a là notre page d'accueil avec sa pagination.</p>

<h2>Les includes</h2>

<p>Un fichier peut être inclu grâce à la méthode <code>include</code> : <code>{% include file %}</code>.</p>

<p>On peut donc par exemple facilement créer les fichiers <code>head.html</code>, <code>header.html</code> et <code>footer.html</code> !</p>

<script type="text/javascript">gist(4526322, '_includes/head.html');</script>




<script type="text/javascript">gist(4526322, '_includes/header.html');</script>




<script type="text/javascript">gist(4526322, '_includes/footer.html');</script>


<h2>Les layouts</h2>

<p>Les layouts sont des fichiers qui contiennent nos pages, notre <em>contenu</em> : <code>{{ content }}</code>.</p>

<p>Voici le layout <code>default</code> que nous avons utilisé pour notre page d'accueil :</p>

<script type="text/javascript">gist(4526322, '_layouts/default.html');</script>


<p>Vous voyez tout de suite l'intérêts des <code>includes</code> n'est-ce pas ?</p>

<p>Et le layout pour nos articles : <code>post</code></p>

<script type="text/javascript">gist(4526322, '_layouts/post.html');</script>


<h2>Notre premier article</h2>

<p>Nos articles sont dans le dossier <code>_posts</code>.</p>

<p>Le nom du fichier est important car il contient la date utilisée dans l'URL. Par exemple : <code>2013-01-13-premier-article.md</code></p>

<p>Et son contenu, rien de plus simple ! On utilise la layout <code>post</code>, une date de publication et un titre :</p>

<pre><code>---
title: "Mon premier article !"
layout: post
published: 2013-01-13 22:00:00
tags: [foo, bar, baz]
---

Super :)
</code></pre>

<h2>Les tags</h2>

<p>On peut également gérer des tags... avec par exemple une page qui va permettre de les lister.</p>

<p>Je vous laisse adapter ce code dans votre layout favoris, sur votre page d'accueil, dans une sidebar ou autre...</p>

<script type="text/javascript">gist(4526322, 'tags.html');</script>


<p>Ici on a surchargé le <code>permalink</code> car sinon notre lien aurait été <code>/tags/</code> et non <code>/tags.html</code>. Seul l'<code>index.html</code> n'est pas modifié au niveau de son URL (sauf si on force le <code>permalink</code>).</p>

<h2>Et GitHub dans tout ça ?</h2>

<p>Au final on a vu comment faire tourner un blog avec Jekyll... Mais je n'ai pas parlé de GitHub.</p>

<p>L'intérêt de GitHub dans cette affaire c'est que nous avons quelque chose de propre pour gérer nos fichiers et une interface vraiment simple pour modifier nos articles.</p>

<p>Depuis peu on peut créer des branches directement dans GitHub, ce qui fait qu'on peut rédiger un article directement en ligne, même s'il n'est pas terminé !</p>

<p>Et les contributeurs d'un projet peuvent devenir des auteurs ;)</p>

<h3>Le CNAME ?</h3>

<p>Le détail qui tue... ajoutez un fichier <code>CNAME</code> qui contient votre nom de domaine, par exemple <code>jacques.sh</code> (<a href="https://github.com/jacquesbh/jacquesbh.github.com/blob/master/CNAME">il existe vraiment !</a>).</p>

<p>Faites pointer vos DNS sur les serveurs de GitHub :</p>

<pre><code>jacques.sh.     38400   IN  A   204.232.175.78
</code></pre>

<p>Et le tour est joué !</p>

<p><em>Ce blog fonctionne avec Jekyll et GitHub :)</em></p>

<p>Pensez à bien modifier l'URL <code>production_url</code> dans la configuration du blog ! Sinon vous risquez quelques surprises avec vos URLs.</p>

<h2>Conclusion</h2>

<p>Je ne parle pas des commentaires et des catégories dans cet article. Mais vous avez toutes les clés en main pour faire ça sans moi !</p>

<p>Pour les catégories, ça fonctionne exactement comme les tags. Notez qu'on ne peut pas avoir d'URL particulière pour une catégorie, ou un tag. A moins de faire quelque chose en Javascript ou autre... (comme les tags de ce blog)</p>

<p>Pour les commentaires il vous suffit d'utiliser <a href="http://disqus.com/">Disqus</a>. Avec un <code>include</code> par exemple ! Et un peu de config ?</p>

<pre><code>disqus:
    username: mon_username
</code></pre>

<p>On récupère le nom d'utilisateur comme ceci : <code>{{ site.disqus.username }}</code></p>

<p>Si vous souhaitez un formulaire de contact vous pouvez vous tourner vers <a href="http://getsimpleform.com/">Get Simple Form</a>.
Il s'agit d'un site qui récupère les données <code>POST</code> d'un formulaire de contact et vous envoi un email avec les informations. Très pratique quand on sait que nous sommes sur un site statique !</p>

<p>N'oubliez pas de gérer l'envoi de votre formulaire en javascript (ou tout autre méthode) afin d'éviter le spam.</p>

<p>Concernant la recherche... c'est un peu compliqué de faire une recherche sur un site statique non ? Au final vous pouvez tenter quelque chose avec un fichier <code>json</code> à la racine de votre site et un bout de javascript pour gérer tout ça !</p>

<p>Vous pouvez récupérer la source de tout ce tuto en <a href="https://gist.github.com/4526322">clonant le gist dédié à cet article</a>, il est totalement fonctionnel et peut servir de base pour votre prochain blog ! (Moi ça sera le cas :)).</p>

<p>N'hésitez pas à regarder la <a href="https://github.com/jacquesbh/jacquesbh.github.com">source de ce blog également</a>.</p>

 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/2013/01/un-site-avec-jekyll-rapidement.html" data-text="Un blog avec Jekyll et GitHub" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/2013/01/un-site-avec-jekyll-rapidement.html#disqus_thread">Commentaires</a> -
        

        <a href="/2013/01/un-site-avec-jekyll-rapidement.html">Lire la suite du tutoriel</a>

    </div>

    <hr />
    <h2><a href="/ajouter-un-handle-personnalise-sur-une-page-sur-magento.html">Ajouter un handle au layout sur Magento</a></h2>
    <div class="content post">
        <blockquote><p>Hey Jacques, c'est possible d'avoir un affichage différent suivant le type de produit ?</p></blockquote>

<p>Bah évidemment ! Et c'est même natif sur Magento !</p>

<blockquote><p>Et on peut faire la même chose sur notre système éditorial ? Pour que suivant le type de news l'affichage soit différent ?</p></blockquote>

<p>Oui on peut, mais là ça implique un peu de dev !</p>

<blockquote><p>Il te faut combien de temps ?</p></blockquote>

<p>Je ne sais pas, pour mettre en place la personnalisation il faut 30 petites minutes... Ensuite pour faire ton templating bah ça dépendra de l'intégration que tu vas me fournir !</p>

<hr />

<p>C'est typiquement le genre de discussion qu'on peut avoir avec un chef de projet qui a besoin d'aller vite et qui vient vous voir pour estimer le travail qu'il va devoir donner aux développeurs. Mais quand on donne au développeur, qui, soit dit en passant, n'a jamais touché aux <em>handles personnalisés</em> sur Magento, ce travail... Et bien il a du mal à voir comment faire, et surtout... comment le faire en 30 minutes !</p>

<p>Laissez-moi vous montrer ;)</p>

<!-- 


<hr />

<p>Avant toute chose vous devez savoir <a href="http://jacques.sh/le-layout-sur-magento.html">comment fonctionne le layout sur Magento</a>. Sans ça vous risquez d'être un peu perdu dans la suite de cet article.</p>

<p>On sait que les handles par défaut qui sont chargés sur notre page <code>frontname/controller/action</code> sont les suivants :</p>

<ul>
<li><code>default</code> : handle principal par défaut</li>
<li><code>STORE_default</code> : handle du store (par défaut)</li>
<li><code>THEME_frontend_default_default</code> : handle du thème (par défaut)</li>
<li><code>frontname_controller_action</code> : handle de notre action</li>
</ul>


<p>On peut aussi avoir les handles <code>customer_logged_out</code> ou <code>customer_logged_in</code> qui permettent de changer l'affichage suivant si le visiteur est connecté ou non.</p>

<p>Maintenant qu'on a ces handles il faut songer à en ajouter... Mais comment ?</p>

<h2>La méthode <code>loadLayout()</code></h2>

<p>Quand on a l'occasion de créer nos propres actions il est vite nécessaire de charger le layout (et donc les handles cités plus haut). Et pour ça c'est la méthode <code>loadLayout()</code> dans notre contrôleur qui fait l'affaire.</p>

<p>Mais cette méthode, elle fait quoi exactement ??</p>

<p>La méthode <code>loadLayout()</code> décortiquée/complétée/nettoyée et commentée ci-dessous :</p>

<script type="text/javascript">gist(4401568, 'load_layout.php', '18-19,30-31,33-35,37-39,50-53');</script>


<p>Vous avez compris le fonctionnement ? Les points les plus importants sont surlignés.</p>

<p>Ok, next ;)</p>

<h2>Un évènement</h2>

<p>Vous avez sans doute remarqué qu'un évènement <code>controller_action_layout_load_before</code> est lancé pile poil avant la génération du XML du Layout qui sera utilisé sur la page... C'est pas par hasard hein ;)</p>

<p>Sauf que le nom de cet évènement, quand on y regarde de plus près, bah il est commun à toutes les pages ! Comment savoir alors si on est bien sur <code>frontname/controller/action</code> ?</p>

<p>Je vais vous donner une solution rapide à mettre en place mais qui ne fonctionnera que sur certains projets assez petits car si vous voulez souvent "taper" sur cet évènement il faudra trouver autre chose. Par chance je l'explique plus bas !</p>

<p>Nous devons dans tous les cas agir sur notre évènement, donc un peu de config, et une classe avec une méthode <code>layoutLoadBefore</code> (pas très original, mais assez parlant) et le tour est joué !</p>

<p>Dans cette méthode on va simplement vérifier que nous sommes bien en train d'afficher notre action et nous allons pouvoir y faire l'ajout de notre nouvel handle :</p>

<script type="text/javascript">gist(4401568, 'observer_handle.php', '12-18');</script>


<p>L'idée c'est surtout de ne pas utiliser une triple condition à la <code>if ($action == 'action' &amp;&amp; $controller == 'controller' &amp;&amp; $module == 'module')</code> car c'est bien trop lourd. On a la possibilité d'avoir un nom d'action précis, alors on fait un case !</p>

<p>Ensuite on ajoute notre handle personnalisé, en majuscules (eh oui !).</p>

<p>Rien ne nous empêche de récupérer un objet dans le registre pour y ajouter un peu de dynamisme (c'est l'idée en fait) : <em>exemple avec une "news"</em></p>

<script type="text/javascript">gist(4401568, 'observer_news.php', '15-18');</script>


<p>A vous de jouer !</p>

<h2>Vérifions</h2>

<p>Pour vérifier que notre handle est présent, rien de plus simple : on ouvre le fichier <code>index.php</code> et on ajoute à la fin du fichier ces quelques lignes.</p>

<script type="text/javascript">gist(4401568, 'index.php');</script>


<p>On actualise ! Et pof ! (tout en bas..)</p>

<h2>En mieux ?</h2>

<p>Si vous devez faire un event sur plein de modules car vous avez souvent besoin de faire de l'affichage personnalisé (c'est super pratique il faut l'avouer !) et bien je vous propose de faire plutôt ceci : lancer un évènement un peu plus personnalisé !</p>

<p>Vous vous souvenez, on a un évènement "global". Mais cet évènement nous donne le nom de l'action (via <code>$observer-&gt;getAction()-&gt;getFullActionName()</code>).</p>

<p>On peut donc lancer un évènement précis pour chaque page sur notre e-commerce :</p>

<script type="text/javascript">gist(4401568, 'observer_dispatch.php', '13-16');</script>


<p>De cette manière on peut utiliser l'évènement <code>controller_action_layout_load_before_frontname_controller_action</code> pour ajouter notre handle sans crainte !</p>

<h2>Et au final ?</h2>

<p>Au final... n'abusez pas des évènements ;)</p>

 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/ajouter-un-handle-personnalise-sur-une-page-sur-magento.html" data-text="Ajouter un handle au layout sur Magento" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/ajouter-un-handle-personnalise-sur-une-page-sur-magento.html#disqus_thread">Commentaires</a> -
        

        <a href="/ajouter-un-handle-personnalise-sur-une-page-sur-magento.html">Lire l'article</a>

    </div>

    <hr />
    <h2><a href="/ajouter-un-script-externe-au-header-sur-magento.html">Ajouter un script externe au header sur Magento</a></h2>
    <div class="content post">
        <p>On a toujours besoin d'ajouter un bout de script ou un script externe complet dans le header de nos pages mais on ne sait jamais comment s'y prendre ! Doit-on préférer la solution simple qui consiste à modifier le template <code>head.phtml</code> ? Devons-nous ajouter ce bout de code en dur ? Le rendre dynamique ?</p>

<p>Quoiqu'il en soit il y a plusieurs façons de faire et cet article a pour but de vous expliquer celle qui est la plus élégante.</p>

<p>L'idée de cet article est dûe au <a href="http://jacques.sh/le-layout-sur-magento.html#comment-743437791">commentaire de Frédéric Martinez</a> sur mon <a href="http://jacques.sh/le-layout-sur-magento.html">article sur le Layout</a>.</p>

<p>Ouvrez-donc votre éditeur de texte préféré et allons faire un tour dans le Layout...</p>

<!-- 


<hr />

<h2>Le block <code>core/text</code></h2>

<p>Vous connaissez tous le block <code>core/text</code> n'est-ce pas ? Ce petit block bien sympathique sur Magento auquel il suffit de donner un texte pour qu'il puisse s'afficher !</p>

<p>Par exemple si on devait initialiser un tel block voici ce qu'on ferait :</p>

<script src="https://gist.github.com/4365871.js?file=create_block.php"></script>


<p>Vous voyez peut-être déjà où je veux en venir ?</p>

<p>Et si maintenant notre texte était <code>&lt;script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"&gt;&lt;/script&gt;</code> ?</p>

<script src="https://gist.github.com/4365871.js?file=jquery.php"></script>


<p>Ok mais dans le layout ça donne quoi ?</p>

<script src="https://gist.github.com/4365871.js?file=core_text.xml"></script>


<p><em>Note : N'oubliez pas le <code>&lt;![CDATA[ ]]&gt;</code> !</em></p>

<h2>Direction le <code>&lt;head/&gt;</code> !</h2>

<p>Quand on regarde un peu les templates de base sur Magento on remarque que le <code>page/html/head.phtml</code> contient une ligne fort pratique :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getChildHtml</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>


<p>Cette ligne affiche tous les enfants du block <code>head</code>.</p>

<p>Donc si on ajoute un block comme celui que nous avons créé à priori son contenu sera affiché à la place de cette ligne.</p>

<p>Pour ajouter notre block voici les options possibles :</p>

<ul>
<li>dans le fichier <code>local.xml</code> : ce fichier est chargé après tous les fichiers XML du Layout.</li>
<li>dans le fichier <code>module.xml</code> d'un module existant ou créé pour l'occasion.</li>
</ul>


<p>Afin de nous éviter la création d'un module rien que pour un fichier de layout nous passerons par le <code>local.xml</code>.</p>

<p>Afin d'ajouter un block à notre <code>head</code> nous devons en faire une référence au préalable.</p>

<p>Voici à quoi ressemble notre <code>local.xml</code> :</p>

<script src="https://gist.github.com/4365871.js?file=local.xml"></script>


<p>A partir de maintenant notre jQuery en provenance de Google est directement chargé dans notre <code>head</code>.</p>

<p>Bien sûr vous pouvez mettre le script d'initialisation d'une librairie par exemple à la place de jQuery.</p>

<h2>Astuce pour vos javascripts</h2>

<p>Lorsqu'on développe sur Magento on est souvent amené à créer des scripts bien à nous.</p>

<p>Et dans ces scripts on a besoin de l'URL du projet dans certains cas.</p>

<p>Voici comment ajouter la "constante" <code>BASE_URL</code> dans le <code>head</code> de vos projets, dans votre local.xml :</p>

<script src="https://gist.github.com/4365871.js?file=local_base_url.xml"></script>




 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/ajouter-un-script-externe-au-header-sur-magento.html" data-text="Ajouter un script externe au header sur Magento" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/ajouter-un-script-externe-au-header-sur-magento.html#disqus_thread">Commentaires</a> -
        

        <a href="/ajouter-un-script-externe-au-header-sur-magento.html">Lire la suite du tutoriel</a>

    </div>

    <hr />
    <h2><a href="/supprimer-le-merge-des-paniers.html">Supprimer le merge des paniers</a></h2>
    <div class="content post">
        <p>Sur presque tous les projets Magento sur lesquels j'ai eu l'occasion de travailler il est apparu nécessaire de désactiver le merge du panier du client avec celui du visiteur lors de la connexion.</p>

<p>Pour cela nous devons commencer par <strong>identifier l'évènement</strong> lancé par Magento qui puisse nous permettre de supprimer ce fameux « merge » car aucune option en admin nous permet de l'empêcher.</p>

<!-- 


<hr />

<h2>Identifier l'évènement</h2>

<p>Il suffit d'investiguer un peu :</p>

<p>Objet <code>Mage_Sales_Model_Quote</code>, qui est donc notre objet « panier » :</p>

<p>Ligne 1678 : <code>public function merge(Mage_Sales_Model_Quote $quote)</code>.</p>

<p>Pour vérifier que notre merge passe bien par là on y place un log : <code>Mage::log(__METHOD__ . ':' . __LINE__);</code>.</p>

<p>On se connecte, on ajoute un produit à notre panier, on se déconnecte, on ajoute un produit dans notre panier et on se connecte à nouveau : là on a un log qui apparaît.</p>

<p>Nous avons trouvé sans trop de difficultés l'endroit où est fait le merge.</p>

<p>On remarque dans la méthode le lancement d'un évènement intéressant :</p>

<div class="highlight"><pre><code class="php"><span class="x">Mage::dispatchEvent(</span>
<span class="x">    $this-&gt;_eventPrefix . &#39;_merge_before&#39;,</span>
<span class="x">    array(</span>
<span class="x">    $this-&gt;_eventObject=&gt;$this,</span>
<span class="x">        &#39;source&#39;=&gt;$quote</span>
<span class="x">    )</span>
<span class="x">);</span>
</code></pre></div>


<p>A partir de là on déduit que l'évènement est <code>sales_quote_merge_before</code> et que ces deux données sont :</p>

<ol>
<li>  Le panier <code>quote</code> : panier du client</li>
<li>  Le panier <code>source</code> : panier du visiteur</li>
</ol>


<h2>La construction du module</h2>

<ol>
<li>  Un modèle <code>Observer</code> qui <code>catch</code> notre évènement et qui vide le panier du client.</li>
<li>  Un helper <code>Data</code> qui nous permet de savoir si notre module est activé et si on peut vider le panier du client quand celui du visiteur est vide.</li>
<li>  Un fichier <code>system.xml</code> qui nous permet d'ajouter un peu de configuation (configuration utilisée dans le helper).</li>
</ol>


<h3>Le helper</h3>

<p>Le helper n'est utilisé que pour savoir deux choses :</p>

<ol>
<li>  Notre module est-il activé ? Ou plutôt, pouvons-nous supprimer le merge des paniers ? Via la méthode <code>isActive</code>.</li>
<li>  Pouvons-nous vider le panier du client si le panier du visiteur est vide ? Via la méthode <code>cleanIfEmpty</code>.</li>
</ol>


<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_cartmerge/raw/master/app/code/community/Jbh/CartMerge/Helper/Data.php"></script>


<h3>Le modèle</h3>

<p>Le modèle <code>catch</code> notre évènement est vide le panier du client que si les conditions suivantes sont validées&nbsp;:</p>

<ol>
<li>  Notre module est actif.</li>
<li>  Le panier du visiteur a des produits OU on peut vider le panier du client si le panier du visiteur est vide.</li>
</ol>


<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_cartmerge/raw/master/app/code/community/Jbh/CartMerge/Model/Observer.php"></script>


<h3>Le <code>system.xml</code></h3>

<p>Le <code>system.xml</code> permet d'ajouter un peu de configuration, tout simplement.</p>

<p>Nous ne nous prenons pas la tête avec les <code>ACL</code> car ils sont déjà gérés par Magento pour cette partie de la configuration.</p>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_cartmerge/raw/master/app/code/community/Jbh/CartMerge/etc/system.xml"></script>


<h2>Conclusion</h2>

<p>Il est en réalité assez simple, à présent, via le module complet, ou en suivant les étapes de cet article, de supprimer le merge des paniers du visiteur et du client lors de la connexion de notre client.</p>

<p>Vous trouverez le <a href="https://github.com/jacquesbh/jbh_cartmerge">code complet du module sur github</a>.</p>

 -->



    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/supprimer-le-merge-des-paniers.html" data-text="Supprimer le merge des paniers" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/supprimer-le-merge-des-paniers.html#disqus_thread">Commentaires</a> -
        

        <a href="/supprimer-le-merge-des-paniers.html">Lire la suite du tutoriel</a>

    </div>

    <hr />
    <h2><a href="/un-push-pour-vos-produits-sur-magento.html">Un push pour vos produits</a></h2>
    <div class="content post">
        <p>Ne vous êtes-vous jamais retrouvé à créer un block dédié au fameux « push produit » sur votre projet ?</p>

<p>Vous savez, le block qui affiche le produit et qu'on a envie de mettre partout, sur la homepage, sur une mise en avant ou que sais-je !</p>

<p>Cet article va vous montrer la meilleure manière de gérer ce problème en prenant en compte, je l'espère, une bonne partie des contraintes.</p>

<!-- 


<hr />

<div style="text-align: center;">
    <img alt="Push produit Magento EE" src="/images/posts/block-push-produit/push_produit_ee.png" height="272" width="161" style="border: 1px dashed gray;" />
</div>


<p>Pour bien faire nous allons créer le module <code>Jbh_Catalog</code>.</p>

<h2>De quoi avons-nous besoin ?</h2>

<p>Pour commencer, comme je l'explique souvent, nous devons déterminer vers quoi nous allons, et ce que nous allons faire. Il s'agit d'une partie d'analyse importante avant de développer.</p>

<p>On liste.</p>

<p>Nous devons :</p>

<ul>
<li> Créer un block <code>Jbh_Catalog_Block_Product_Push</code> pour afficher notre produit. Nous devons prévoir que notre block puisse s'ajuster au type de produit via des templates spécifiques. On poussera un peu la chose et pour cela nous aurons besoin d'un peu de config. Nous ne gérerons pas le cache de notre block (par défaut sur Magento).</li>
<li> Créer un helper <code>Jbh_Catalog_Helper_Product</code> pour récupérer notre block. Via la méthode <code>getPush($product)</code>.</li>
<li> Créer un modèle <code>Jbh_Catalog_Model_Product_Push_Config</code> pour gérer notre configuration.</li>
</ul>


<p>Maintenant que nous savons ce que nous devons faire, faisons-le par étape.</p>

<h2>La configuration</h2>

<p>Pourquoi avons-nous besoin d'un peu de config ?</p>

<p>Comme tout projet e-commerce j'imagine que votre boutique comprend plusieurs types de produits.</p>

<p>Par défaut Magento en comprend 6 types de produits différents (+ le type <code>Gift Card</code> en EE).</p>

<p>L'idée c'est que bien souvent chaque type de produit a un push un peu différent. Bien souvent on affiche des infos pour un type, par pour l'autre.</p>

<p>Une première solution pour gérer ça est de conditionner simplement notre <code>phtml</code> avec de simples <code>if ($_product-&gt;getTypeId() == Mage_Catalog_Model_Product_Type_Configurable::TYPE_CODE)</code> par exemple.</p>

<p>La seconde consiste à gérer un template par type, avec un template par défaut. Si le template pour le type du produit est défini alors on l'utilise, sinon on prend celui par défaut.</p>

<p>Voici un exemple de configuration que nous pouvons mettre en place :</p>

<div class="highlight"><pre><code class="xml"><span class="nt">&lt;jbh&gt;</span>
    <span class="nt">&lt;catalog&gt;</span>
        <span class="nt">&lt;product&gt;</span>
            <span class="nt">&lt;push&gt;</span>
                <span class="nt">&lt;modes&gt;</span>
                    <span class="nt">&lt;default&gt;</span>
                        <span class="nt">&lt;templates&gt;</span>
                            <span class="nt">&lt;default&gt;</span>jbh/catalog/product/push/grid/default.phtml<span class="nt">&lt;/default&gt;</span>
                            <span class="nt">&lt;simple&gt;</span>jbh/catalog/product/push/grid/default.phtml<span class="nt">&lt;/simple&gt;</span>
                            <span class="nt">&lt;giftcard&gt;</span>jbh/catalog/product/push/grid/default.phtml<span class="nt">&lt;/giftcard&gt;</span>
                        <span class="nt">&lt;/templates&gt;</span>
                    <span class="nt">&lt;/default&gt;</span>
                    <span class="nt">&lt;list&gt;</span>
                        <span class="nt">&lt;templates&gt;</span>
                            <span class="nt">&lt;default&gt;</span>jbh/catalog/product/push/list/default.phtml<span class="nt">&lt;/default&gt;</span>
                            <span class="nt">&lt;simple&gt;</span>jbh/catalog/product/push/list/default.phtml<span class="nt">&lt;/simple&gt;</span>
                            <span class="nt">&lt;giftcard&gt;</span>jbh/catalog/product/push/list/default.phtml<span class="nt">&lt;/giftcard&gt;</span>
                        <span class="nt">&lt;/templates&gt;</span>
                    <span class="nt">&lt;/list&gt;</span>
                <span class="nt">&lt;/modes&gt;</span>
            <span class="nt">&lt;/push&gt;</span>
        <span class="nt">&lt;/product&gt;</span>
    <span class="nt">&lt;/catalog&gt;</span>
<span class="nt">&lt;/jbh&gt;</span>
</code></pre></div>


<p>De cette manière il devient très facile de changer le template pour chaque mode ou chaque type de produit. Et pourquoi pas ajouter un <em>mode</em> ou encore un <em>type</em> fictif ? Après tout rien ne nous empêche d'inventer un mode, par exemple <code>homepage_mea</code>, pour changer les templates de tous les produits qui sont sur la mise en avant sur notre page d'accueil...</p>

<h3>Notre modèle</h3>

<p>Notre modèle <code>Jbh_Catalog_Model_Product_Push_Config</code> comprend les méthodes suivantes :</p>

<ul>
<li> <code>getModes()</code> qui retourne le tableau de tous les modes possibles.</li>
<li> <code>getTemplates($mode)</code> qui retourne un tableau des templates par types, suivant le mode.</li>
</ul>


<p>Bien sûr les <code>path</code> de la configuration sont dans des constantes.</p>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_catalog/raw/master/app/code/community/Jbh/Catalog/Model/Product/Push/Config.php"></script>


<h2>Le block</h2>

<p>Notre block dépend surtout du produit et du mode que nous voulons utiliser pour l'affichage.</p>

<p>Pour cela nous indiquons dans notre fichier PHP que notre classe comprend les méthodes implicites suivantes :</p>

<ul>
<li> <code>@method Jbh_Catalog_Block_Product_Push setProduct(Mage_Catalog_Model_Product $product)</code></li>
<li> <code>@method Mage_Catalog_Model_Product getProduct()</code></li>
<li> <code>@method Jbh_Catalog_Block_Product_Push setMode(string $mode)</code></li>
<li> <code>@method string getMode()</code></li>
</ul>


<p>Ces méthodes sont utilisées lors de l'affichage dans la méthode <code>_toHtml</code>.</p>

<p>Si un template a déjà été défini (si jamais il a été forcé par exemple) alors nous ne le changeons pas.</p>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_catalog/raw/master/app/code/community/Jbh/Catalog/Block/Product/Push.php"></script>


<h2>Le helper</h2>

<p>Notre helper est la clé de ce module car c'est lui qui va nous retourner notre block pour le produit que nous lui donnons.</p>

<p>Nous développons donc deux méthodes :</p>

<ul>
<li> <code>getPush($product, $mode = null)</code> qui retournera le block instancié.</li>
<li> <code>getPushHtml($product, $mode = null)</code> qui retournera le HTML du block.</li>
</ul>


<p>La première méthode fera juste une petite vérification : Notre variable <code>$product</code> est-elle bien un objet du type <code>Mage_Catalog_Model_Product</code> ? Si ça n'est pas le cas alors on considère que c'est un identifiant entier, et on <code>load</code> le produit. Ensuite on retourne notre nouveau block avec le produit et le mode dans ses données (via le <code>Varien_Object</code> hérité).</p>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_catalog/raw/master/app/code/community/Jbh/Catalog/Helper/Product.php"></script>


<h2>Comment ça marche ?</h2>

<p>Pour utiliser notre block rien de plus simple !</p>

<p>Appelons simplement la méthode <code>getPushHtml</code> de notre helper :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">helper</span><span class="p">(</span><span class="s1">&#39;jbh_catalog/product&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getPushHtml</span><span class="p">(</span><span class="nv">$product</span><span class="p">,</span> <span class="nv">$mode</span><span class="p">);</span>
</code></pre></div>


<p>Le <code>$mode</code> n'est pas obligatoire.</p>

<p>Le <code>$product</code> peut être un produit instancié ou un entier (identifiant du produit).</p>

<h2>Conclusion</h2>

<p>Il vous est maintenant très facile, via un peu de configuration, de changer les différents affichages de vos produits sans vous prendre la tête.</p>

<p>Rien ne vous empêche comme vous pouvez le voir de créer un mode didié à une page en particulier.</p>

<p>Vous pouvez <a href="https://github.com/jacquesbh/jbh_catalog">retrouver le module <code>Jbh_Catalog</code> sur Github</a>.</p>

 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/un-push-pour-vos-produits-sur-magento.html" data-text="Un push pour vos produits" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/un-push-pour-vos-produits-sur-magento.html#disqus_thread">Commentaires</a> -
        

        <a href="/un-push-pour-vos-produits-sur-magento.html">Lire l'article</a>

    </div>


<div class="pagination">
    <hr/>
    
    
    
    <a href="/page2" class="previous">Précédent</a>
    
    –
    
    
    <span class="page_number">Page 3 sur 6</span>
    
    
    –
    <a href="/page4" class="next">Suivant</a>
    
    
</div>



</div>

<script type="text/javascript">
    var disqus_shortname = 'jacquesbh';
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



    </div>

    <div id="bottomWrap">
        <div id="contactWrap">
            <form action="#" method="post" id="contact_form">
                <h3>Contact</h3>
                <p>
                    <label for="contactNom">Votre nom</label>
                    <input type="text" name="contact_name" id="contact_name" class="text" tabindex="1" />
                </p>
                <p>
                    <label for="contactEmail">Votre email</label>
                    <input type="email" name="contact_email" id="contact_email" class="text" tabindex="2" />
                </p>
                <p>
                    <label for="contactMessage">Message</label>
                    <textarea name="contact_message" id="contact_message" rows="5" cols="30" tabindex="8"></textarea>
                </p>
                <p class="send">
                    <input type="hidden" name="redirect_to" value="http://jacques.sh/contact/thanks.html" />
                    <input type="submit" id="contactSend" value="Envoyer" tabindex="9" />
                </p>
                <div style="display: none;" class="url">http://getsimpleform.com/messages?form_api_token=4ba030c3b67553e1ccb25710aee63bd6</div>
            </form>
            <div class="qrcode">
                <h3>Mon QRcode</h3>
                <p>
                    <img src="/img/qrcode.png" alt="le QRcode" width="198" height="192" />
                </p>
            </div>
        </div>

        <div id="footerWrap">
            <div class="social">
                <a href="https://twitter.com/jacquesbh" class="twitter-follow-button" data-show-count="false">Follow @jacquesbh</a>
            </div>
            
            <a href="http://monsieurbiz.com" title="Découvrez Monsieur Biz, une agence spécialisée sur Magento, solution e-commerce">Agence Magento</a>
            | 

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
            
            <a href="/credits.html">Crédits</a>
        
    

    
        
    

    
        
            |
            <a href="/legals.html">Informations légales</a>
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    





            | <a href="/atom.xml">RSS</a>
            | <a href="#" id="toplink">Haut de page</a>
            <br />
            <span class="copy">&copy; Jacques Bodin-Hullin - 2013</span>
        </div>
    </div>

</div>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27192340-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>





<script type="text/javascript" src="/js/jquery/cookies.js"></script>
    <div id="popin" class="monsieurbiz-popin" style="display: none;">
        <img src="/img/monsieurbiz.png" alt="" height="250" style="height: 250px;" />
        <h2><span class="lines">Un projet, Une agence</span></h2>
        <div class="action">
            <p>
                Monsieur Biz, une agence spécialisée Magento pour votre projet.
            </p>
            <a href="http://monsieurbiz.com">
                <div class="button1">C'est par ici que ça se passe !</div>
            </a>
        </div>
    </div>

    <script type="text/javascript">
        (function ($) {
            $(document).ready(function () {
                var cookieId = 'monsieurbizPopinDisplayed';
                if ($.cookie(cookieId) == null) {
                    $.fancybox.open('#popin');
                    $.cookie(cookieId, 'true');
                }
            });
         })(jQuery);
    </script>


<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

</body>
</html>

