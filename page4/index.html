

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8"/>
    <title>Des articles sur Magento et plein d'autres choses ! - Jacques Bodin-Hullin, développeur Magento</title>
    
    
    <meta name="author" content="Jacques Bodin-Hullin">
    <link href="/css/style.css" rel="stylesheet" type="text/css" />
    <link href="/css/pygments.css" rel="stylesheet" type="text/css" media="all">
    <link href="/js/fancybox/jquery.fancybox.css" rel="stylesheet" type="text/css" media="all">
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="favicon.ico">
  <!-- Update these with your own images
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
    <link rel="alternate" type="application/rss+xml" title="Jacques Bodin-Hullin - Latest Posts" href="/atom.xml" >

    <script type="text/javascript" src="/js/jquery-1.10.2.min.js" ></script>
    <script type="text/javascript" src="/js/fancybox/jquery.fancybox.pack.js" ></script>
    <script type="text/javascript" src="/js/event.js" ></script>
    <script type="text/javascript" src="/js/functions.js" ></script>

    <style for="gists"></style>
</head>
<body class="">

<div id="mainWrap">

    <div id="topWrap">
        <div id="headerWrap">
            <p>
                Jacques Bodin-Hullin
                <span class="baseline">Développeur d'applications Web</span>
            </p>
            <a href="http://jacques.sh"></a>

            <div id="magento_certified">
                <a href="http://www.magentocommerce.com/certification/directory/dev/69536/" title="Jacques Bodin-Hullin, développeur certifié Magento Developer" class="developer" target="_blank"></a>
                <a href="http://www.magentocommerce.com/certification/directory/dev/69536/" title="L'Agence Monsieur Biz est certifiée Magento Developer Plus" class="developer-plus" target="_blank"></a>
                <a href="http://www.magentocommerce.com/certification/directory/dev/69536/" title="Jacques Bodin-Hullin est développeur certifié Magento Front End Developer" class="frontend-developer" target="_blank"></a>
            </div>

        </div>

        <blockquote id="quoteWrap">
            
            <p>
                La perfection est atteinte non quand il ne reste rien à ajouter, mais quand il ne reste
                rien à enlever.
            </p>
            <div><cite>Antoine de Saint Exupéry</cite></div>
            
        </blockquote>

        <ul id="menu">
            
            <li><a href="/"><span></span>Accueil</a></li>
            
            <li><a href="https://github.com/jacquesbh" target="_blank"><span></span>Code</a></li>
            
            
    
        
    

    
        
            
            <li><a href="/a-propos.html"><span></span>A propos</a></li>
            
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
            
            <li><a href="/references.html"><span></span>Références</a></li>
            
        
    

    
        
    

    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    




            <li class="search">
                <form action="/search.html" method="get" id="search_form">
                    <div>
                        <input type="text" name="q" placeholder="Votre recherche" />
                    </div>
                </form>
            </li>
        </ul>

        <div class="mbiz">
            <p>
                <a href="http://monsieurbiz.com" title="Découvrez l'agence Monsieur Biz, spécialiste Magento">
                    <img src="/img/monsieurbiz_bg.png" title="L'Agence Monsieur Biz" />
                    <span>Vous cherchez une agence à taille humaine spécialisée sur la solution e-commerce Magento ? L'agence Monsieur Biz est faite pour vous.</span>
                </a>
            </p>
        </div>
    </div>

    <div id="globalWrap">



<div id="sideWrap">

<h2>A propos</h2>
<div>
    <img src="/img/visage_edito.png" alt="" width="277" height="88" />
    <p>Bienvenue sur mon blog !</p>
    <p>Je suis Jacques Bodin-Hullin, développeur PHP confirmé, certifié sur Magento.</p>
    <p>Ce blog est dédié au développement, PHP essentiellement, Javascript un peu, et tout le reste, évidemment !</p>
    <p>N'hésitez pas à aller faire un tour <a href="https://github.com/jacquesbh">sur mon github</a> afin de suivre mes projets et à poster vos remarques sur les articles que vous trouvez ici, c'est toujours constructif !</p>
    <p>J'espère que vous trouverez ici l'information que vous cherchez.</p>
</div>

<hr />




<h2>Tags</h2>

<p class="tags">

    <span style="font-size:14.4px"><a href="/search.html?tag=Jekyll">Jekyll</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Markdown">Markdown</a></span>

    <span style="font-size:14.4px"><a href="/search.html?tag=GitHub">GitHub</a></span>

    <span style="font-size:36.0px"><a href="/search.html?tag=Magento">Magento</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Snippets">Snippets</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Vim">Vim</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Netbeans">Netbeans</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=jQuery">jQuery</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Javascript">Javascript</a></span>

    <span style="font-size:14.4px"><a href="/search.html?tag=PHP">PHP</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=URL">URL</a></span>

    <span style="font-size:14.4px"><a href="/search.html?tag=Bonnes pratiques">Bonnes pratiques</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Ajax">Ajax</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Homepage">Homepage</a></span>

    <span style="font-size:16.8px"><a href="/search.html?tag=Layout">Layout</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=CMS">CMS</a></span>

    <span style="font-size:14.4px"><a href="/search.html?tag=The Installer">The Installer</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Android">Android</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Proxy">Proxy</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=HTTP">HTTP</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Git">Git</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Workflow">Workflow</a></span>

    <span style="font-size:14.4px"><a href="/search.html?tag=Cache">Cache</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Block">Block</a></span>

    <span style="font-size:14.4px"><a href="/search.html?tag=Module">Module</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Cart">Cart</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Customer">Customer</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Handle">Handle</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Events">Events</a></span>

    <span style="font-size:15.6px"><a href="/search.html?tag=Attributes">Attributes</a></span>

    <span style="font-size:15.6px"><a href="/search.html?tag=Product">Product</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Product type">Product type</a></span>

    <span style="font-size:14.4px"><a href="/search.html?tag=EAV">EAV</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Thème">Thème</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=MariaDB">MariaDB</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=MySQL">MySQL</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Images">Images</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Aides de vue">Aides de vue</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=OS X">OS X</a></span>

    <span style="font-size:13.2px"><a href="/search.html?tag=Astuces">Astuces</a></span>

</p>

<hr />



</div>


<div id="contentWrap">

    


    <hr />
    <h2><a href="/utiliser-un-proxy-sur-android.html">Android + Proxy = HTTP en clair</a></h2>
    <div class="content post">
        <p>Ce soir j'ai joué à un jeu (dont je ne donnerai pas le nom) sur mon téléphone, sous Android 4.1.1 (Jelly Bean).</p>

<p>Et il m'est venue l'idée de voir les requêtes envoyées par l'application pour enregistrer mon score...</p>

<p>Procédure très facile à réaliser !</p>

<!-- 




<hr />


<p>Ok tout d'abord je me suis dit que je pouvais peut-être sniffer les requêtes TCP depuis mon Mac à condition que le téléphone soit sur le même réseau... Pas possible.</p>

<p>Ensuite je me suis dit que j'allais simplement utiliser <a href="http://www.charlesproxy.com/">Charles</a>, un proxy HTTP très sympa. J'ai donc pensé à mettre en place le proxy directement sur mon téléphone. Sauf que oui, mais non... Le proxy en place sur la connexion WiFi du téléphone n'est utilisé que par le navigateur. Enfin c'est ce qu'Android m'annonce quand je change le proxy.</p>

<p>Soit.</p>

<p>Je décide donc de récupérer le APK de mon application (via <a href="http://airdroid.com">AirDroid</a>) et d'utiliser une machine virtuelle android.</p>

<p>Pour la machine virtuelle c'est simple... je prends le <a href="http://developer.android.com/sdk/index.html">SDK Android</a>.</p>

<h2>Installer un <code>Android Virtual Device</code></h2>

<p>Avant tout il nous faut donc une machine tournant sur Android. Pour ça on va simplement utiliser l'émulateur fourni avec le SDK.</p>

<p>Le SDK est fraîchement téléchargé et pas complet, on remédie au problème en lançant la jolie interface <code>;)</code> :</p>

<pre><code>~ $ cd Developper/android-sdk-macosx/tools/
~/Developper/android-sdk-macosx/tools $ ./android
</code></pre>

<p><img src="/images/posts/android-http-proxy/charles.png" alt="Android SDK Manager" /></p>

<p>On sélectionne l'API 16 (Android 4.1) et on installe tout ça !</p>

<p>Maintenant nous avons donc tout ce qu'il faut pour créer notre <code>AVD</code>.</p>

<p>On commence donc par lister les systèmes Android disponibles :</p>

<pre><code>~/Developper/android-sdk-macosx/tools $ ./android list targets
Available Android targets:
----------
id: 1 or "android-16"
     Name: Android 4.1
     Type: Platform
     API level: 16
     Revision: 2
     Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800, WXGA800-7in
     ABIs : armeabi-v7a
</code></pre>

<p>Ensuite il nous faut créer notre <code>AVD</code> :</p>

<pre><code>~/Developper/android-sdk-macosx/tools $ ./android create avd -n android_4.1 -a -c 100M -t android-16
Auto-selecting single ABI armeabi-v7a
Android 4.1 is a basic Android platform.
Do you wish to create a custom hardware profile [no]
Created AVD 'android_4.1' based on Android 4.1, ARM (armeabi-v7a) processor,
with the following hardware config:
hw.lcd.density=240
vm.heapSize=48
hw.ramSize=512
</code></pre>

<p>Tapez <code>[enter]</code> ou <code>no</code> à la question sur le <code>hardware profile</code>.</p>

<h2>Lancer Charles et notre <code>AVD</code></h2>

<p>Avant de lancer notre nouvelle machine sous Android, nous devons lancer Charles.</p>

<pre><code>clic clic
</code></pre>

<p>Voilà qui est fait.</p>

<p>Et maintenant ? On lance notre émulateur !</p>

<p>Attention : nous devons dire à notre émulateur que toutes les requêtes TCP passent par notre proxy, pour se faire rien de bien compliqué, nous devons ajouter l'argument <code>-http-proxy localhost:8888</code> à la ligne de commande permettant de lancer l'émulateur :</p>

<pre><code>~/Developper/android-sdk-macosx/tools $ ./emulator @android_4.1 -http-proxy localhost:8888
</code></pre>

<p>Pourquoi <code>localhost:8888</code> ? Simplement parce que par défaut Charles est actif sur le port 8888 et que nous sommes donc en local (car notre machine virtuelle est... virtuelle).</p>

<p>Maintenant que nous avons une machine sous Android qui tourne et un proxy qui nous donne les informations sur toutes les requêtes TCP non chiffrées qui passent...</p>

<h2>Installer notre <code>APK</code> téléchargé sur notre <code>AVD</code></h2>

<p>Nous avons téléchargez notre <code>.apk</code> via <a href="http://airdroid.com">AirDroid</a> et nous devons maintenant l'installer sur notre machine Android :</p>

<p>On se déplace dans le dossier <code>platform-tools</code> où se situe le fameux <code>adb</code> :</p>

<pre><code>~/Developper/android-sdk-macosx/tools $ cd ../platform-tools/
</code></pre>

<p>On installe notre <code>apk</code> téléchargé :</p>

<pre><code>~/Developper/android-sdk-macosx/platform-tools $ ./adb install ~/Downloads/SuperApplication.apk
780 KB/s (1392781 bytes in 1.743s)
    pkg: /data/local/tmp/SuperApplication.apk
Success
</code></pre>

<p>Et maintenant on lance l'application sur la machine virtuelle (via le menu graphique... normal quoi) et on regarde ce que nous affiche Charles (qui enregistre ce qu'il se passe par défaut au lancement du logiciel).</p>

<h2>Conclusion</h2>

<p>On se rend compte que certaines applications (des jeux ? avec des scores ?) font transiter les informations en clair (connexion non sécurisée) et qu'il est donc très facile de reproduire un fonctionnement standard, avec de fausses valeurs (comment ça il a fait un score plus grand que le score maxi ???).</p>

<blockquote><p>Ca s'appelle tricher ça ! Oui MONSIEUR !</p></blockquote>

<p>En même temps... il existe un <a href="http://en.wikipedia.org/wiki/Transport_Layer_Security" title="Transport Layer Security">standard qui s'appelle TLS</a>.</p>

 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/utiliser-un-proxy-sur-android.html" data-text="Android + Proxy = HTTP en clair" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/utiliser-un-proxy-sur-android.html#disqus_thread">Commentaires</a> -
        

        <a href="/utiliser-un-proxy-sur-android.html">Lire l'article</a>

    </div>

    <hr />
    <h2><a href="/apprendre-a-utiliser-magento-installer.html">Utiliser l'Installer - Créer un grid en admin</a></h2>
    <div class="content post">
        <p>Dans mon article précédent je dévoile mon <strong>Installer</strong>.</p>

<p>Pour vous permettre de prendre en main et vous montrer les possibilités de l'outil je vais vous montrer comment faire un simple grid en admin, en 13mn et 30s.</p>

<p>A vos marques...</p>

<!-- 




<hr />


<p>Ce tutoriel utilise l'<strong>Installer</strong> : <a href="http://jacques.sh/the-installer-v1.html">En savoir plus sur l'Installer pour Magento</a></p>

<p>Tout d'abord on commence par déterminer ce dont nous avons besoin :</p>

<ol>
<li>Un module <code>Jbh_Grid</code></li>
<li>Un modèle <code>Foo</code>, une ressource <code>Foo</code> et une collection <code>Foo_Collection</code></li>
<li>Un routeur admin et son menu</li>
<li>Un contrôleur admin</li>
<li>2 blocs pour constituer le grid en admin (le container et le grid)</li>
<li>Un setup MySQL</li>
<li>Un helper Data pour les traductions, ainsi qu'un fichier de traductions <code>.csv</code></li>
</ol>


<p>Nous ne verrons pas ici comment faire le formulaire pour ajouter/éditer notre objet <code>Foo</code>.</p>

<h2>Création des fichiers grâce à l'Installer</h2>

<p>Lançons l'outil : (<a href="https://github.com/jacquesbh/Installer/tree/v1#bash-function-required">Voir le README</a>)</p>

<pre><code>$ jbh
The Installer - by jacquesbh
&gt;
</code></pre>

<p>On commence par créer notre module :</p>

<pre><code>&gt; mod jbh grid local
Using: Jbh_Grid in local
Jbh_Grid&gt;
</code></pre>

<p>Notez qu'on peut lancer l'Installer directement sur le module que l'on souhaite :</p>

<pre><code>$ jbh jbh grid local
The Installer - by jacquesbh
Using: Jbh_Grid in local
&gt;
</code></pre>

<p>Ensuite passons à notre "entité" :</p>

<pre><code>Jbh_Grid&gt; ent foo jbh_grid_foo
</code></pre>

<p>Vous pouvez bien sûr ne taper que <code>ent</code> ou <code>entity</code> et suivre les instructions :</p>

<pre><code>Jbh_Grid&gt; entity
Entity?
&gt; foo
Table?
&gt; jbh_grid_foo
</code></pre>

<p>A ce stade nous avons tous nos modèles.</p>

<p>Le routeur en admin :</p>

<pre><code>Jbh_Grid&gt; r admin foo_adminhtml
</code></pre>

<p>Pour le menu il nous faudra éditer manuellement le fichier <code>etc/adminhtml.xml</code> de notre module.</p>

<p>(N'y oublions pas les ACL ;))</p>

<p>Ensuite il nous faut notre contrôleur admin avec l'action grid :</p>

<pre><code>Jbh_Grid&gt; c adminhtml_index grid
</code></pre>

<p>Nous en sommes à l'étape où il nous faut créer le grid...</p>

<p>2 possibilités :</p>

<ul>
<li>Soit : créer le grid bloc après bloc, initialiser les blocs etc.</li>
<li>Soit : utiliser la commande grid qui fait (presque) tout à notre place</li>
</ul>


<p>Le choix est vite fait...</p>

<pre><code>Jbh_Grid&gt; grid foo
</code></pre>

<p>Il nous faut le setup pour créer notre table en base de données !</p>

<pre><code>Jbh_Grid&gt; setup
</code></pre>

<p>On termine par notre Helper Data : (vide)</p>

<pre><code>Jbh_Grid&gt; h data -
</code></pre>

<h2>Résumé des commandes</h2>

<p>Une fois que vous connaissez les commandes (alias + ordre des arguments) vous pouvez aller vraiment vite !</p>

<p>Vraiment vite... On reprend, en 30 secondes :</p>

<pre><code>$ jbh jbh grid local
The Installer - by jacquesbh
Using: Jbh_Grid in local
Jbh_Grid&gt; ent foo jbh_grid_foo
Jbh_Grid&gt; r admin foo_adminhtml
Jbh_Grid&gt; c adminhtml_index grid
Jbh_Grid&gt; grid foo
Jbh_Grid&gt; setup
Jbh_Grid&gt; h data -
Jbh_Grid&gt;
</code></pre>

<h2>Le SQL de notre table</h2>

<p>Réfléchissons 3 minutes pour construire notre table en base de données :</p>

<div class="highlight"><pre><code class="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">`</span><span class="n">jbh_grid_foo</span><span class="o">`</span> <span class="p">(</span>
  <span class="o">`</span><span class="n">foo_id</span><span class="o">`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="n">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span> <span class="k">COMMENT</span> <span class="s1">&#39;The Foo ID&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="nb">text</span><span class="o">`</span> <span class="nb">text</span> <span class="k">COMMENT</span> <span class="s1">&#39;The text of our Foo&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">created_at</span><span class="o">`</span> <span class="n">datetime</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">&#39;Creation date&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">updated_at</span><span class="o">`</span> <span class="n">datetime</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">&#39;Update date&#39;</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="o">`</span><span class="n">foo_id</span><span class="o">`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span>
</code></pre></div>


<p>Complétons notre setup :</p>

<script src="https://gist.github.com/3344499.js?file=app/code/local/Jbh/Grid/sql/jbh_grid_setup/mysql4-install-0.1.0.php"></script>


<h2>Notre menu admin</h2>

<p>Il nous faut éditer notre fichier <code>etc/adminhtml.xml</code> pour ajouter notre menu et les ACLs :</p>

<script src="https://gist.github.com/3344499.js?file=app/code/local/Jbh/Grid/etc/adminhtml.xml"></script>


<h2>Notre contrôleur admin</h2>

<p>On ajoute avant tout la méthode <code>_isAllowed()</code> à notre contrôleur :</p>

<pre><code>Jbh_Grid&gt; c adminhtml_index _isAllowed:bool
</code></pre>

<p>On complète assez rapidement !</p>

<script src="https://gist.github.com/3344499.js?file=app/code/local/Jbh/Grid/controllers/Adminhtml/IndexController.php"></script>


<h2>Complétons notre grid</h2>

<p>Il nous faut ajouter les colonnes à notre grid ainsi que le configurer un minimum...</p>

<h3>Le container</h3>

<script src="https://gist.github.com/3344499.js?file=app/code/local/Jbh/Grid/Block/Adminhtml/Foo.php"></script>


<h3>Le grid</h3>

<script src="https://gist.github.com/3344499.js?file=app/code/local/Jbh/Grid/Block/Adminhtml/Foo/Grid.php"></script>


<h2>N'oublions pas les traductions !</h2>

<pre><code>Jbh_Grid&gt; __
Where? (enter for front)
&gt; admin
Translate?
&gt; Foo #
Traduction for fr_FR?
&gt; Foo ID
Traduction for en_US?
&gt; 
Jbh_Grid&gt; __
Translate?
&gt; Text
Traduction for fr_FR?
&gt; Texte
Traduction for en_US?
&gt; 
Jbh_Grid&gt; __
Translate?
&gt; Manage Foos
Traduction for fr_FR?
&gt; Gérer les Foos
Traduction for en_US?
&gt; 
Jbh_Grid&gt;
</code></pre>

<p>Vous aurez remarqué que lors de l'ajout de la première ligne dans les fichiers de traduction l'Installer nous demande où nous voulons ajouter nos traductions. Tout simplement parce que la manipulation des traductions implique l'ajout d'un bout de config à notre module.</p>

<p>Et ça donne ça, pour le français par exemple :</p>

<script src="https://gist.github.com/3344499.js?file=app/locales/fr_FR/Jbh_Grid.csv"></script>


<h2>Conclusion</h2>

<p>Au final...</p>

<ul>
<li>30 secondes pour créer notre architecture</li>
<li>3 minutes pour créer le SQL et compléter le setup</li>
<li>5 minutes pour le fichier <code>adminhtml.xml</code></li>
<li>5 minutes pour terminer le grid</li>
</ul>


<p>Ce qu'on obtient : Un module propre, développé avec les conventions <code>Zend Framework</code>, sans erreur de config.</p>

<p>Surtout... le <code>config.xm</code>l... <code>&lt;3 &lt;3 &lt;3</code></p>

<script src="https://gist.github.com/3344499.js?file=app/code/local/Jbh/Grid/etc/config.xml"></script>


<p>Le bonheur quoi...</p>

<p>Vos avis sont les bienvenus !</p>

<p>Vous pouvez <a href="https://gist.github.com/3344499/download">télécharger ce module</a>.</p>

<h3>Astuce</h3>

<p>Pour avoir une licence personnalisée dans le haut de mes fichiers voici la commande que j'ai réellement lancée :</p>

<pre><code>$ LICENSE='WTFPL (http://sam.zoy.org/wtfpl/COPYING)' jbh jbh grid local
</code></pre>

 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/apprendre-a-utiliser-magento-installer.html" data-text="Utiliser l'Installer - Créer un grid en admin" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/apprendre-a-utiliser-magento-installer.html#disqus_thread">Commentaires</a> -
        

        <a href="/apprendre-a-utiliser-magento-installer.html">Lire la suite du tutoriel</a>

    </div>

    <hr />
    <h2><a href="/the-installer-v1.html">Je dévoile l'Installer</a></h2>
    <div class="content post">
        <p>Tout a commencé à Berlin en 2011...</p>

<p>(J'ai tout de même réussi – une seule fois – à perdre la totalité de 3 heures de travail...)</p>

<p>Si vous trouvez des bugs, si vous souhaitez améliorer.... n'hésitez pas c'est sur GitHub !</p>

<p>Ah aussi... je prépare une v2, mais je ne sais pas encore comment l'organiser... probablement avec un système modulaire permettant d'ajouter des commandes à volonté.</p>

<p>Amusez-vous !</p>

<p style="text-align: center;" class="code">
    PERSONNAL USAGE ONLY<br/>
    For professional or commercial use, ask.<br/>
    <a href="https://github.com/jacquesbh/Installer/tree/master" title="The Installer" style="font-size: 30px;">The Installer - v1</a>
</p>



    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/the-installer-v1.html" data-text="Je dévoile l'Installer" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/the-installer-v1.html#disqus_thread">Commentaires</a> -
        

        <a href="/the-installer-v1.html">Lire l'article</a>

    </div>

    <hr />
    <h2><a href="/une-nouvelle-homepage.html">Changeons notre homepage !</a></h2>
    <div class="content post">
        <p>J'en ai parlé récemment avec un collègue chez <a href="http://www.internim.com" title="Créateur de solutions OpenSource">Internim</a> :</p>

<blockquote><p>« Quelle est la meilleure manière de <strong>personnaliser la homepage d'un site sous Magento</strong> ? »</p></blockquote>

<p>Je n'ai sans doute pas la meilleure... mais en tout cas elle est simple et pratique :)</p>

<!-- 




<hr />


<p>Pour commencer il faut savoir que la <em>Homepage</em> est une <strong>page CMS</strong> et qu'à ce titre elle est administrable dans l'admin de Magento.</p>

<p><img src="images/posts/une-nouvelle-home/homepage_cms.png" title="La homepage dans la liste des pages CMS en admin" alt="La Homepage dans les pages CMS" /></p>

<p>L'idée c'est que nous allons simplement changer le layout de notre page. Par défaut la <em>home</em> est sur <code>2 columns with right bar</code>. Faisons en sorte que son layout soit <code>homepage</code>.</p>

<p>Notre module <code>Jbh_Homepage</code> va juste ajouter un <em>layout</em> pour toutes les pages CMS. Il nous suffira de changer celui de la home !</p>

<p>Pour ajouter un layout au niveau des pages CMS il suffit d'ajouter un peu de XML à notre configuration.</p>

<p>On commence par déclarer notre module qui dépendra de <code>Mage_Cms</code> et <code>Mage_Page</code> :</p>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_homepage/raw/master/app/etc/modules/Jbh_Homepage.xml"></script>


<p>Ensuite on passe au <code>config.xml</code> dans lequel on indique notre nouveau layout dans le path <code>global/page/layout</code>.
A noter qu'on peut aussi utiliser le path <code>global/cms/layouts</code>.</p>

<p>J'en profite pour créer un layout update, histoire d'avoir un <code>handle</code> bien à nous : <code>page_homepage</code>.</p>

<blockquote><p>Quel intérêt ? On a déjà le handle <code>cms_index_index</code> pour la homepage non ?</p></blockquote>

<p>Exact ! Sauf que le handle <code>cms_index_index</code> s'appliquera dans tous les cas à votre homepage, quelque soit son layout.
Notre handle à nous ne sera appliqué que si c'est notre layout qui est utilisé, vous voyez la nuance ? ;)</p>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_homepage/raw/master/app/code/community/Jbh/Homepage/etc/config.xml"></script>


<p>Ensuite il ne nous reste plus quand chose... Créons notre page <code>phtml</code> : (J'ai copié le <code>1column.phtml</code>)</p>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_homepage/raw/master/app/design/frontend/base/default/template/page/homepage.phtml"></script>


<p>Et on termine par le fichier de mise à jour des layouts :</p>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_homepage/raw/master/app/design/frontend/base/default/layout/jbh_homepage.xml"></script>


<p>En soi rien de bien compliqué :</p>

<ol>
<li>On ajoute un layout possible pour nos pages CMS</li>
<li>On ajoute un <code>handle</code> pour pouvoir faire appel rapidement à notre homepage dans nos layouts</li>
<li>On met tout notre HTML dans notre template <code>page/homepage.phtml</code></li>
</ol>


<p>Have fun !</p>

<p>Le module est <a href="https://github.com/jacquesbh/jbh_homepage">dispo sur github</a>. Vous pouvez aussi le <a href="https://github.com/jacquesbh/jbh_homepage/tarball/master">télécharger en tar.gz</a> directement.</p>

 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/une-nouvelle-homepage.html" data-text="Changeons notre homepage !" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/une-nouvelle-homepage.html#disqus_thread">Commentaires</a> -
        

        <a href="/une-nouvelle-homepage.html">Lire la suite du tutoriel</a>

    </div>

    <hr />
    <h2><a href="/vos-blocs-en-ajax-via-webservice.html">Vos blocs en ajax ?</a></h2>
    <div class="content post">
        <p>C'est une demande récurrente...</p>

<blockquote><p>Comment afficher le footer de mon site sur mon blog ?</p></blockquote>

<p>C'est un exemple... Mais le footer est souvent dynamique et nous avons souvent un intérêt à pouvoir ressortir juste le contenu HTML du footer via une simple requête HTTP.</p>

<!-- 




<hr />


<p>Comme j'ai commencé par parler du footer... on va prendre cet exemple !</p>

<h2>L'astuce ?</h2>

<p>En fait par défaut quand vous chargez le <code>layout</code> sur votre page, c'est le block <code>root</code> qui s'affiche automatiquement.</p>

<blockquote><p>Savez-vous pourquoi ?</p></blockquote>

<p>Simplement parce qu'on lui a dit de le faire !</p>

<blockquote><p>Comment ?</p></blockquote>

<p>Comme ça : <code>output="toHtml"</code> dans le layout <code>page.xml</code>.</p>

<h2>Notre module</h2>

<p>Il nous faut bien sûr faire un module... Nous l'appellerons <code>Jbh_Webservice</code>. J'ai très peu d'imagination :)</p>

<p>Nous aurons juste besoin d'un contrôleur (et donc d'une route front) :</p>

<script src="https://gist.github.com/3210926.js?file=config.xml"></script>


<p>Dans le contrôleur, rien de bien compliqué :</p>

<ul>
<li>Une action <code>footerAction</code> qui va retirer le output du block <code>root</code> et afficher directement le block <code>footer</code>.</li>
<li>Une méthode <code>postDispatch</code> qui va modifier le contenu de la réponse si on a besoin d'un callback (pour du JSONP par exemple).</li>
</ul>


<script src="https://gist.github.com/3210926.js?file=PageController.php"></script>


<p>L'idée c'est que c'est à vous d'ajouter vos propres actions par la suite !</p>

<h2>Bonus : un appel via jQuery</h2>

<p>Voici comment appeler notre footer en ajax via jQuery :</p>

<script src="https://gist.github.com/3210926.js?file=demo.js"></script>


<p>Sachez qu'un simple appel en php tel que :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="nv">$footer</span> <span class="o">=</span> <span class="nx">file_get_content</span><span class="p">(</span><span class="s1">&#39;http://example.org/webservice/page/footer&#39;</span><span class="p">);</span>
</code></pre></div>


<p>Suffit largement pour récupérer le footer ! Faire du javascript n'a d'intérêt que si on souhaite récupérer la session utilisateur (pour lui afficher son panier par exemple !).</p>

<h2>Conclusion</h2>

<p>Il devient assez simple de faire des appels de blocks via une instance Magento pour un blog ou tout autre plateforme indirectement liée à votre e-commerce.</p>

<p>Faites-vous plaisir !</p>

<p>Ces scripts sont sous la <a href="http://sam.zoy.org/wtfpl/">WTFPL</a>.</p>

<p>P.S. Le fichier <code>app/etc/modules/Jbh_Webservice.xml</code> est <a href="https://gist.github.com/3210926#file_jbh_webservice.xml">sur github ;)</a></p>

 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/vos-blocs-en-ajax-via-webservice.html" data-text="Vos blocs en ajax ?" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/vos-blocs-en-ajax-via-webservice.html#disqus_thread">Commentaires</a> -
        

        <a href="/vos-blocs-en-ajax-via-webservice.html">Lire la suite du tutoriel</a>

    </div>


<div class="pagination">
    <hr/>
    
    
    
    <a href="/page3" class="previous">Précédent</a>
    
    –
    
    
    <span class="page_number">Page 4 sur 6</span>
    
    
    –
    <a href="/page5" class="next">Suivant</a>
    
    
</div>



</div>

<script type="text/javascript">
    var disqus_shortname = 'jacquesbh';
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



    </div>

    <div id="bottomWrap">
        <div id="contactWrap">
            <form action="#" method="post" id="contact_form">
                <h3>Contact</h3>
                <p>
                    <label for="contactNom">Votre nom</label>
                    <input type="text" name="contact_name" id="contact_name" class="text" tabindex="1" />
                </p>
                <p>
                    <label for="contactEmail">Votre email</label>
                    <input type="email" name="contact_email" id="contact_email" class="text" tabindex="2" />
                </p>
                <p>
                    <label for="contactMessage">Message</label>
                    <textarea name="contact_message" id="contact_message" rows="5" cols="30" tabindex="8"></textarea>
                </p>
                <p class="send">
                    <input type="hidden" name="redirect_to" value="http://jacques.sh/contact/thanks.html" />
                    <input type="submit" id="contactSend" value="Envoyer" tabindex="9" />
                </p>
                <div style="display: none;" class="url">http://getsimpleform.com/messages?form_api_token=4ba030c3b67553e1ccb25710aee63bd6</div>
            </form>
            <div class="qrcode">
                <h3>Mon QRcode</h3>
                <p>
                    <img src="/img/qrcode.png" alt="le QRcode" width="198" height="192" />
                </p>
            </div>
        </div>

        <div id="footerWrap">
            <div class="social">
                <a href="https://twitter.com/jacquesbh" class="twitter-follow-button" data-show-count="false">Follow @jacquesbh</a>
            </div>
            
            <a href="http://monsieurbiz.com" title="Découvrez Monsieur Biz, une agence spécialisée sur Magento, solution e-commerce">Agence Magento</a>
            | 

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
            
            <a href="/credits.html">Crédits</a>
        
    

    
        
    

    
        
            |
            <a href="/legals.html">Informations légales</a>
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    





            | <a href="/atom.xml">RSS</a>
            | <a href="#" id="toplink">Haut de page</a>
            <br />
            <span class="copy">&copy; Jacques Bodin-Hullin - 2013</span>
        </div>
    </div>

</div>

<script type="text/javascript" src="/js/jquery/cookies.js"></script>
    <div id="popin" class="monsieurbiz-popin" style="display: none;">
        <img src="/img/monsieurbiz.png" alt="" height="250" style="height: 250px;" />
        <h2><span class="lines">Un projet, Une agence</span></h2>
        <div class="action">
            <p>
                Monsieur Biz, une agence spécialisée Magento pour votre projet.
            </p>
            <a href="http://monsieurbiz.com">
                <div class="button1">C'est par ici que ça se passe !</div>
            </a>
        </div>
    </div>

    <script type="text/javascript">
        (function ($) {
            $(document).ready(function () {
                var cookieId = 'monsieurbizPopinDisplayed';
                if ($.cookie(cookieId) == null) {
                    $.fancybox.open('#popin');
                    $.cookie(cookieId, 'true');
                }
            });
         })(jQuery);
    </script>


<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

</body>
</html>

