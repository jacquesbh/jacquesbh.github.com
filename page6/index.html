

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8"/>
    <title>Des articles sur Magento et plein d'autres choses ! - Jacques Bodin-Hullin, développeur Magento</title>
    
    
    <meta name="author" content="Jacques Bodin-Hullin">
    <link href="/css/style.css" rel="stylesheet" type="text/css" />
    <link href="/css/pygments.css" rel="stylesheet" type="text/css" media="all">
    <link href="/js/fancybox/jquery.fancybox.css" rel="stylesheet" type="text/css" media="all">
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/favicon.ico">
  <!-- Update these with your own images
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
    <link rel="alternate" type="application/rss+xml" title="Jacques Bodin-Hullin - Latest Posts" href="/atom.xml" >

    <script type="text/javascript" src="/js/jquery-1.10.2.min.js" ></script>
    <script type="text/javascript" src="/js/fancybox/jquery.fancybox.pack.js" ></script>
    <script type="text/javascript" src="/js/event.js" ></script>
    <script type="text/javascript" src="/js/functions.js" ></script>

    <style for="gists"></style>
</head>
<body class="">

<div id="mainWrap">

    <div id="topWrap">
        <div id="headerWrap">
            <p>
                Jacques Bodin-Hullin
                <span class="baseline">Développeur d'applications Web</span>
            </p>
            <a href="http://jacques.sh"></a>

            <div id="magento_certified">
                <a href="http://www.magentocommerce.com/certification/directory/dev/69536/" title="L'Agence Monsieur Biz est certifiée Magento Solution Specialist" class="solution-specialist" target="_blank"></a>
                <a href="http://www.magentocommerce.com/certification/directory/dev/69536/" title="L'Agence Monsieur Biz est certifiée Magento Developer Plus" class="developer-plus" target="_blank"></a>
                <a href="http://www.magentocommerce.com/certification/directory/dev/69536/" title="Jacques Bodin-Hullin, développeur certifié Magento Developer" class="developer" target="_blank"></a>
                <a href="http://www.magentocommerce.com/certification/directory/dev/69536/" title="Jacques Bodin-Hullin est développeur certifié Magento Front End Developer" class="frontend-developer" target="_blank"></a>
            </div>



        </div>

        <blockquote id="quoteWrap">
            
            <p>
                La perfection est atteinte non quand il ne reste rien à ajouter, mais quand il ne reste
                rien à enlever.
            </p>
            <div><cite>Antoine de Saint Exupéry</cite></div>
            
        </blockquote>

        <ul id="menu">
            
            <li><a href="/"><span></span>Accueil</a></li>
            
            <li><a href="https://github.com/jacquesbh" target="_blank"><span></span>Code</a></li>
            
            
    
        
    

    
        
            
            <li><a href="/a-propos.html"><span></span>A propos</a></li>
            
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
            
            <li><a href="/references.html"><span></span>Références</a></li>
            
        
    

    
        
    

    
        
    

    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    




            <li class="search">
                <form action="/search.html" method="get" id="search_form">
                    <div>
                        <input type="text" name="q" placeholder="Votre recherche" />
                    </div>
                </form>
            </li>
        </ul>

        <div class="mbiz">
            <p>
                <a href="http://monsieurbiz.com" title="Découvrez l'agence Monsieur Biz, spécialiste Magento">
                    <img src="/img/monsieurbiz_bg.png" title="L'Agence Monsieur Biz" />
                    <span>Vous cherchez une agence spécialiste du e-commerce certifiée Magento Solution Specialist ? L'agence Monsieur Biz est faite pour vous !</span>
                </a>
            </p>
        </div>
    </div>

    <div id="globalWrap">



<div id="sideWrap">

<h2>A propos</h2>
<div>
    <img src="/img/visage_edito.png" alt="" width="277" height="88" />
    <p>Bienvenue sur mon blog !</p>
    <p>Je suis <a href="/a-propos.html">Jacques Bodin-Hullin, développeur PHP confirmé, certifié Magento</a>.</p>
    <p>Ce blog est dédié au développement, PHP essentiellement, Javascript un peu, et tout le reste, évidemment !</p>
    <p>N'hésitez pas à aller faire un tour <a href="https://github.com/jacquesbh">sur mon github</a> afin de suivre mes projets et à poster vos remarques sur les articles que vous trouvez ici, c'est toujours constructif !</p>
    <p>J'espère que vous trouverez ici l'information que vous cherchez.</p>
</div>

<div>
    <p>Je suis également le fondateur de <a href="http://monsieurbiz.com">Monsieur Biz, une agence spécialisée Magento</a>.</p>
</div>

<hr />




<h2>Tags</h2>

<p class="tags">

    <span style="font-size:14.4px"><a href="/search.html#!tag=Jekyll">Jekyll</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Markdown">Markdown</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=GitHub">GitHub</a></span>

    <span style="font-size:38.4px"><a href="/search.html#!tag=Magento">Magento</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Snippets">Snippets</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Vim">Vim</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Netbeans">Netbeans</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=jQuery">jQuery</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Javascript">Javascript</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=PHP">PHP</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=URL">URL</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=Bonnes pratiques">Bonnes pratiques</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Ajax">Ajax</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Homepage">Homepage</a></span>

    <span style="font-size:16.8px"><a href="/search.html#!tag=Layout">Layout</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=CMS">CMS</a></span>

    <span style="font-size:15.6px"><a href="/search.html#!tag=The Installer">The Installer</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Android">Android</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Proxy">Proxy</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=HTTP">HTTP</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Git">Git</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Workflow">Workflow</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=Cache">Cache</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Block">Block</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=Module">Module</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Cart">Cart</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Customer">Customer</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Handle">Handle</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Events">Events</a></span>

    <span style="font-size:15.6px"><a href="/search.html#!tag=Attributes">Attributes</a></span>

    <span style="font-size:15.6px"><a href="/search.html#!tag=Product">Product</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Product type">Product type</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=EAV">EAV</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Thème">Thème</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=MariaDB">MariaDB</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=MySQL">MySQL</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Images">Images</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Aides de vue">Aides de vue</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=OS X">OS X</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Astuces">Astuces</a></span>

    <span style="font-size:14.4px"><a href="/search.html#!tag=MageConf">MageConf</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Émulation">Émulation</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Meet Magento">Meet Magento</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Productivité">Productivité</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=SSL">SSL</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Sécurité">Sécurité</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=COMODO">COMODO</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=gandi">gandi</a></span>

    <span style="font-size:13.2px"><a href="/search.html#!tag=Fabric">Fabric</a></span>

</p>

<hr />



</div>


<div id="contentWrap">

    


    <hr />
    <h2><a href="/vos-blocs-en-ajax-via-webservice.html">Vos blocs en ajax ?</a></h2>
    <div class="content post">
        <p>C'est une demande récurrente...</p>

<blockquote><p>Comment afficher le footer de mon site sur mon blog ?</p></blockquote>

<p>C'est un exemple... Mais le footer est souvent dynamique et nous avons souvent un intérêt à pouvoir ressortir juste le contenu HTML du footer via une simple requête HTTP.</p>

<!-- 




<hr />


<p>Comme j'ai commencé par parler du footer... on va prendre cet exemple !</p>

<h2>L'astuce ?</h2>

<p>En fait par défaut quand vous chargez le <code>layout</code> sur votre page, c'est le block <code>root</code> qui s'affiche automatiquement.</p>

<blockquote><p>Savez-vous pourquoi ?</p></blockquote>

<p>Simplement parce qu'on lui a dit de le faire !</p>

<blockquote><p>Comment ?</p></blockquote>

<p>Comme ça : <code>output="toHtml"</code> dans le layout <code>page.xml</code>.</p>

<h2>Notre module</h2>

<p>Il nous faut bien sûr faire un module... Nous l'appellerons <code>Jbh_Webservice</code>. J'ai très peu d'imagination :)</p>

<p>Nous aurons juste besoin d'un contrôleur (et donc d'une route front) :</p>

<script src="https://gist.github.com/3210926.js?file=config.xml"></script>


<p>Dans le contrôleur, rien de bien compliqué :</p>

<ul>
<li>Une action <code>footerAction</code> qui va retirer le output du block <code>root</code> et afficher directement le block <code>footer</code>.</li>
<li>Une méthode <code>postDispatch</code> qui va modifier le contenu de la réponse si on a besoin d'un callback (pour du JSONP par exemple).</li>
</ul>


<script src="https://gist.github.com/3210926.js?file=PageController.php"></script>


<p>L'idée c'est que c'est à vous d'ajouter vos propres actions par la suite !</p>

<h2>Bonus : un appel via jQuery</h2>

<p>Voici comment appeler notre footer en ajax via jQuery :</p>

<script src="https://gist.github.com/3210926.js?file=demo.js"></script>


<p>Sachez qu'un simple appel en php tel que :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="nv">$footer</span> <span class="o">=</span> <span class="nx">file_get_content</span><span class="p">(</span><span class="s1">&#39;http://example.org/webservice/page/footer&#39;</span><span class="p">);</span>
</code></pre></div>


<p>Suffit largement pour récupérer le footer ! Faire du javascript n'a d'intérêt que si on souhaite récupérer la session utilisateur (pour lui afficher son panier par exemple !).</p>

<h2>Conclusion</h2>

<p>Il devient assez simple de faire des appels de blocks via une instance Magento pour un blog ou tout autre plateforme indirectement liée à votre e-commerce.</p>

<p>Faites-vous plaisir !</p>

<p>Ces scripts sont sous la <a href="http://sam.zoy.org/wtfpl/">WTFPL</a>.</p>

<p>P.S. Le fichier <code>app/etc/modules/Jbh_Webservice.xml</code> est <a href="https://gist.github.com/3210926#file_jbh_webservice.xml">sur github ;)</a></p>

 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/vos-blocs-en-ajax-via-webservice.html" data-text="Vos blocs en ajax ?" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/vos-blocs-en-ajax-via-webservice.html#disqus_thread">Commentaires</a> -
        

        <a href="/vos-blocs-en-ajax-via-webservice.html">Lire la suite du tutoriel</a>

    </div>

    <hr />
    <h2><a href="/le-piege-des-routes-sur-magento.html">Le piège des routeurs sur Magento</a></h2>
    <div class="content post">
        <p>Magento a un système de routes assez complexe...</p>

<p>Entre les routes <code>frontend</code>, les routes <code>admin</code>, le catalogue et son <code>URL rewriting</code> et les pages CMS... On a vite fait de s'y perdre !</p>

<p>Cet article est là pour vous montrer que Magento reste une application très permissive. Attention !</p>

<!-- 




<hr />


<p>Je me suis longtemps trompé sur la manière de créer mes routes... surtout celles destinées à mes contrôleurs d'admin.</p>

<h2>Le front</h2>

<p>Pour ajouter une routes simple pour le front il y a un bout de XML à connaître. Rien de bien compliqué :</p>

<div class="highlight"><pre><code class="xml"><span class="nt">&lt;frontend&gt;</span>
    <span class="nt">&lt;routers&gt;</span>
        <span class="nt">&lt;name_of_my_route&gt;</span>
            <span class="nt">&lt;use&gt;</span>standard<span class="nt">&lt;/use&gt;</span>
            <span class="nt">&lt;args&gt;</span>
                <span class="nt">&lt;module&gt;</span>My_Module<span class="nt">&lt;/module&gt;</span>
                <span class="nt">&lt;frontName&gt;</span>foo<span class="nt">&lt;/frontName&gt;</span>
            <span class="nt">&lt;/args&gt;</span>
        <span class="nt">&lt;/name_of_my_route&gt;</span>
    <span class="nt">&lt;/routers&gt;</span>
<span class="nt">&lt;/frontend&gt;</span>
</code></pre></div>


<p>Quelques explications :</p>

<ul>
<li><code>name_of_my_route</code> c'est le nom de la route... vraiment. Par exemple si je veux générer une URL via notre nouvelle route je fais :</li>
</ul>


<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="nx">Mage</span><span class="o">::</span><span class="na">getUrl</span><span class="p">(</span><span class="s1">&#39;name_of_my_route/bar/baz&#39;</span><span class="p">);</span> <span class="c1">// =&gt; http://example.com/foo/bar/baz</span>
</code></pre></div>


<ul>
<li><code>&lt;use&gt;standard&lt;/use&gt;</code> c'est pour dire que c'est une route en front.</li>
<li><code>&lt;module&gt;My_Module&lt;/module&gt;</code> c'est le nom de votre module. Si vous mettez <code>Super_Foo</code> alors le contrôleur <code>index</code> aura pour nom : <code>Super_Foo_IndexController</code>.</li>
<li><code>&lt;frontName&gt;foo&lt;/frontName&gt;</code> c'est le "final" de la route : http://example.com/<strong>foo</strong>/bar/baz.</li>
</ul>


<h2>L'admin</h2>

<p>En admin c'est exactement pareil... ou presque.</p>

<p>En réalité les routes de l'admin sont « parsées » avant celles du front. Ce qui fait que si votre route admin permet d'accéder à un contrôleur frontal... bah ça fonctionnera.</p>

<h2>Exemple « bad practices »</h2>

<p>L'architecture :</p>

<pre><code>app/code/local/Jbh/Blog
└── controllers
    ├── Adminhtml
    │   └── ManageController.php
    └── IndexController.php
</code></pre>

<p><code>controllers/IndexController.php</code> :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Jbh_Blog_IndexController</span> <span class="k">extends</span> <span class="nx">Mage_Core_Controller_Front_Action</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">exit</span><span class="p">(</span><span class="s1">&#39;front&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>


<p><code>controllers/Adminhtml/MagnageController.php</code> :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Jbh_Blog_Adminhtml_ManageController</span> <span class="k">extends</span> <span class="nx">Mage_Adminhtml_Controller_Action</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">exit</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>


<p>Maintenant regardez bien ce fichier de config :</p>

<div class="highlight"><pre><code class="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;config&gt;</span>
    <span class="nt">&lt;modules&gt;</span>
        <span class="nt">&lt;Jbh_Blog&gt;</span>
            <span class="nt">&lt;version&gt;</span>0.1.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/Jbh_Blog&gt;</span>
    <span class="nt">&lt;/modules&gt;</span>
    <span class="nt">&lt;frontend</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;admin&gt;</span>
        <span class="nt">&lt;routers&gt;</span>
            <span class="nt">&lt;jbh_blog&gt;</span>
                <span class="nt">&lt;use&gt;</span>admin<span class="nt">&lt;/use&gt;</span>
                <span class="nt">&lt;args&gt;</span>
                    <span class="nt">&lt;module&gt;</span>Jbh_Blog<span class="nt">&lt;/module&gt;</span>
                    <span class="nt">&lt;frontName&gt;</span>blog<span class="nt">&lt;/frontName&gt;</span>
                <span class="nt">&lt;/args&gt;</span>
            <span class="nt">&lt;/jbh_blog&gt;</span>
        <span class="nt">&lt;/routers&gt;</span>
    <span class="nt">&lt;/admin&gt;</span>
<span class="nt">&lt;/config&gt;</span>
</code></pre></div>


<p>Vous remarquerez que nous n'avons rien dans la balise <code>frontend</code>, que notre routeur est bien dans <code>&lt;admin/&gt;</code> et a bien une balise <code>&lt;use&gt;</code> qui vaut <code>admin</code> également.</p>

<p>On est donc en droit de penser que notre contrôleur front : <code>Jbh_Blog_IndexController</code> qui étend <code>Mage_Core_Controller_</code><strong>Front</strong><code>_Action</code> ne peut pas être accessible via cette route dédiée à l'admin.</p>

<p>Que neni !</p>

<pre><code>http://example.com/blog/index/index =&gt; « front »
http://example.com/blog/adminhtml_manage/index =&gt; « admin »
</code></pre>

<p>WTF ?!</p>

<p>[ Faites le test ;) ]</p>

<h2>Bonnes pratiques</h2>

<p>La manière de créer un routeur en front ne change pas car dans ce sens tout est bon. Impossible d'accéder à un contrôleur admin depuis un routeur frontal.</p>

<p>Par contre voici comment éviter que nos routeurs d'admin ne soient utilisés pour afficher des contrôleurs front :</p>

<div class="highlight"><pre><code class="diff"><span class="gd">--- a/config.xml</span>
<span class="gi">+++ b/config.xml</span>
<span class="gu">@@ -8,13 +8,13 @@</span>
     &lt;frontend /&gt;
     &lt;admin&gt;
         &lt;routers&gt;
<span class="gd">-            &lt;jbh_blog&gt;</span>
<span class="gi">+            &lt;jbh_blog_adminhtml&gt;</span>
                 &lt;use&gt;admin&lt;/use&gt;
                 &lt;args&gt;
<span class="gd">-                    &lt;module&gt;Jbh_Blog&lt;/module&gt;</span>
<span class="gd">-                    &lt;frontName&gt;blog&lt;/frontName&gt;</span>
<span class="gi">+                    &lt;module&gt;Jbh_Blog_Adminhtml&lt;/module&gt;</span>
<span class="gi">+                    &lt;frontName&gt;blog_adminhtml&lt;/frontName&gt;</span>
                 &lt;/args&gt;
<span class="gd">-            &lt;/jbh_blog&gt;</span>
<span class="gi">+            &lt;/jbh_blog_adminhtml&gt;</span>
         &lt;/routers&gt;
     &lt;/admin&gt;
 &lt;/config&gt;
</code></pre></div>


<p>Ce que ça donne :</p>

<div class="highlight"><pre><code class="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;config&gt;</span>
    <span class="nt">&lt;modules&gt;</span>
        <span class="nt">&lt;Jbh_Blog&gt;</span>
            <span class="nt">&lt;version&gt;</span>0.1.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/Jbh_Blog&gt;</span>
    <span class="nt">&lt;/modules&gt;</span>
    <span class="nt">&lt;frontend</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;admin&gt;</span>
        <span class="nt">&lt;routers&gt;</span>
            <span class="nt">&lt;jbh_blog_adminhtml&gt;</span>
                <span class="nt">&lt;use&gt;</span>admin<span class="nt">&lt;/use&gt;</span>
                <span class="nt">&lt;args&gt;</span>
                    <span class="nt">&lt;module&gt;</span>Jbh_Blog_Adminhtml<span class="nt">&lt;/module&gt;</span>
                    <span class="nt">&lt;frontName&gt;</span>blog_adminhtml<span class="nt">&lt;/frontName&gt;</span>
                <span class="nt">&lt;/args&gt;</span>
            <span class="nt">&lt;/jbh_blog_adminhtml&gt;</span>
        <span class="nt">&lt;/routers&gt;</span>
    <span class="nt">&lt;/admin&gt;</span>
<span class="nt">&lt;/config&gt;</span>
</code></pre></div>


<blockquote><p>Tu peux nous expliquer ce que ça change ?</p></blockquote>

<p>Le plus important c'est la balise <code>&lt;module&gt;</code> qui vaut maintenant <code>Jbh_Blog_Adminhtml</code>.</p>

<p>Ceci a pour effet d'automatiquement préfixer les contrôleurs demandés par cette route de <code>Jbh_Blog_Adminhtml_</code>.</p>

<p>La route admin a également un nom différent pour pouvoir la différencer de la route front :)</p>

<h3>Exemple</h3>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>

<span class="nx">Mage</span><span class="o">::</span><span class="na">getUrl</span><span class="p">(</span><span class="s1">&#39;jbh_blog_adminhtml/manage/index&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; http://example.com/blog_adminhtml/manage/index</span>
<span class="c1">// =&gt; controller: Jbh_Blog_Adminhtml_ManageController</span>
</code></pre></div>


<h2>Conclusion</h2>

<p>Nous avons donc forcément besoin d'une route front pour accéder à notre <code>Jbh_Blog_IndexControler</code>. Inévitable.</p>

<p>Problème résolu.</p>

<ul>
<li>Suffixez vos routeurs d'admin par quelque chose (<code>_adminhtml</code> tout simplement, ou <code>_admin</code> à la limite ;)).</li>
<li>Pensez à la balise <code>&lt;module/&gt;</code> pour forcer l'utilisation d'un sous répertoire dans les <code>controllers</code>.</li>
</ul>


<p>En espérant que vous y verrez plus clair dans vos routes et que vous ne ferez pas (plus ?) cette erreur !</p>

 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/le-piege-des-routes-sur-magento.html" data-text="Le piège des routeurs sur Magento" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/le-piege-des-routes-sur-magento.html#disqus_thread">Commentaires</a> -
        

        <a href="/le-piege-des-routes-sur-magento.html">Lire la suite du tutoriel</a>

    </div>

    <hr />
    <h2><a href="/connectez-vous-sur-un-compte-client-sur-magento.html">Se connecter sur le compte d'un client</a></h2>
    <div class="content post">
        <p>Par défaut sur la Magento Community, nous n'avons pas de fonctionnalité pour se connecter sur le compte du client.</p>

<p>Autant vous dire que parfois c'est quand même la <em>loose</em>. Bah ouais... le client a un problème et impossible de reproduire. De plus, lui demander de nous faire un screen pour voir comment ça se passe pour lui c'est juste... bah non en fait.</p>

<p>Alors la solution c'est de se connecter sur son compte, même si ça n'est pas toujours la solution miracle, souvent ça aide un peu.</p>

<p>Et puis on obtient d'un coup une autre fonctionnalité : on peut payer une commande pour le client par téléphone. Pratique non ?</p>

<!-- 




<hr />


<p>Le module que nous allons développer nous allons l'appeler <code>Jbh_ConnectAs</code> et il sera dans community.</p>

<p>Pourquoi dans community ? Parce qu'il est <a href="http://github.com/jacquesbh/jbh_connectas" title="Le module Jbh_ConnectAs sur GitHub">dispo en ligne</a>, pour la communauté.</p>

<h2>Posons les bases</h2>

<p>Nous avons besoin de :</p>

<ul>
<li>Un event pour ajouter le bouton « Connect As » sur la fiche client</li>
<li>Un observer qui va attraper l'event</li>
<li>Un contrôleur pour <em>se connecter sur le compte du client</em></li>
<li>Une gestion de droits pour ne pas afficher ce bouton à tout le monde</li>
</ul>


<p>Avec ça nous avons bien sûr besoin d'un <em>Helper Data</em>, mais d'aucun block.</p>

<h2>Notre event</h2>

<p>Quand on regarde bien on voit qu'on peut mettre des boutons au niveau du block <code>Mage_Adminhtml_Block_Customer_Edit</code>.
Après tout, pourquoi ne pourrions-nous pas avoir notre petit bouton orange à côté des autres ?</p>

<p>Ils utilisent dans le constructeur secondaire (<code>protected function _construct</code> sur tous les <code>Varien_Object</code>) la méthode <code>_addButton</code>. Pas de bol, elle est protégée... Pas super pratique pour nous ça. Pas grave, on regarde ce qu'elle fait... et là c'est le petit bonheur...</p>

<p>En fait il existe dans le container <code>Mage_Adminhtml_Block_Widget_Container</code> un alias public pour un certain nombre de méthodes protégées, dont notre <code>_addButton</code> :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">addButton</span><span class="p">(</span><span class="nv">$id</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$level</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$sortOrder</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$area</span> <span class="o">=</span> <span class="s1">&#39;header&#39;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_addButton</span><span class="p">(</span><span class="nv">$id</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$level</span><span class="p">,</span> <span class="nv">$sortOrder</span><span class="p">,</span> <span class="nv">$area</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>


<p>Donc si on réfléchi bien... il nous suffit de récupérer ce block avant qu'il n'affiche la fiche du client pour pouvoir y ajouter notre bouton dynamiquement.
On ne va pas se prendre la tête très longtemps sur l'évènement à attraper. Chaque action a un <code>event</code> qui annonce le début du rendu. Pour nous, c'est ça :</p>

<pre><code>controller_action_layout_render_before_adminhtml_customer_edit
</code></pre>

<p>Op, on a notre event :</p>

<div class="highlight"><pre><code class="xml"><span class="nt">&lt;controller_action_layout_render_before_adminhtml_customer_edit&gt;</span>
    <span class="nt">&lt;observers&gt;</span>
        <span class="nt">&lt;add_connectas_button&gt;</span>
            <span class="nt">&lt;class&gt;</span>jbh_connectas/observer<span class="nt">&lt;/class&gt;</span>
            <span class="nt">&lt;method&gt;</span>addOurCoolButton<span class="nt">&lt;/method&gt;</span>
        <span class="nt">&lt;/add_connectas_button&gt;</span>
    <span class="nt">&lt;/observers&gt;</span>
<span class="nt">&lt;/controller_action_layout_render_before_adminhtml_customer_edit&gt;</span>
</code></pre></div>


<p>Comme on le voit dans cet event l'observer sera <code>Jbh_ConnectAs_Model_Observer</code> et la méthode <code>addOurCoolButton</code>. Ce bout de xml sera à placer dans le tag <code>adminhtml</code> de notre <code>config.xml</code> car nous sommes sur un event lancé en partie admin.</p>

<h2>Les fichiers</h2>

<h3>La config : <code>/app/code/community/Jbh/ConnectAs/etc/config.xml</code></h3>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_connectas/raw/master/app/code/community/Jbh/ConnectAs/etc/config.xml"></script>


<h3>Bien sûr notre fichier <em>etc/modules</em> : <code>/app/etc/modules/Jbh_ConnectAs.xml</code></h3>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_connectas/raw/master/app/etc/modules/Jbh_ConnectAs.xml"></script>


<h3>Notre fichier pour les droits en admin : <code>/app/code/community/Jbh/ConnectAs/etc/adminhtml.xml</code></h3>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_connectas/raw/master/app/code/community/Jbh/ConnectAs/etc/adminhtml.xml"></script>


<h3>Notre contrôleur d'admin : <code>/app/code/community/Jbh/ConnectAs/controllers/Adminhtml/IndexController.php</code></h3>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_connectas/raw/master/app/code/community/Jbh/ConnectAs/controllers/Adminhtml/IndexController.php"></script>


<h3>Notre observeur : <code>/app/code/community/Jbh/ConnectAs/Model/Observer.php</code></h3>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_connectas/raw/master/app/code/community/Jbh/ConnectAs/Model/Observer.php"></script>


<h3>Notre helper <code>Data</code> : <code>/app/code/community/Jbh/ConnectAs/Helper/Data.php</code></h3>

<script src="http://gist-it.appspot.com/github/jacquesbh/jbh_connectas/raw/master/app/code/community/Jbh/ConnectAs/Helper/Data.php"></script>


<h2>Et au final ça fonctionne comment ?</h2>

<p>A priori vous devriez voir apparaître au niveau des boutons d'actions de la fiche du client un nouveau bouton "Connect As".</p>

<p>N'oubliez pas que les droits sont gérés et que vous pouvez par conséquent autoriser certains rôles à utiliser cette fonctionnalité.</p>

<p>Il est également possible de rajouter des traductions puisque le PHP a été prévu pour. Il manque juste un peu de config et les fichiers CSV de traductions.</p>

<p>Merci à <a href="http://benjion.wordpress.com/2011/04/29/magento-se-connecter-en-tant-que-client-depuis-ladmin/">Benjion pour l'article original</a> que j'ai eu l'occasion d'améliorer/corriger.</p>

<p>Well done :)</p>

 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/connectez-vous-sur-un-compte-client-sur-magento.html" data-text="Se connecter sur le compte d'un client" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/connectez-vous-sur-un-compte-client-sur-magento.html#disqus_thread">Commentaires</a> -
        

        <a href="/connectez-vous-sur-un-compte-client-sur-magento.html">Lire la suite du tutoriel</a>

    </div>

    <hr />
    <h2><a href="/realisez-vos-propres-scripts-php-sur-magento.html">Les scripts Magento</a></h2>
    <div class="content post">
        <p>Nous sommes tous confrontés à un moment ou à un autre à devoir palier un problème rapidement sur un site en production.</p>

<p>Le problème le plus souvent doit se régler avec un script shell. Un script shell ok... mais en PHP !
Hors de question de se taper le script bash/python ou autre alors qu'on a besoin de charger Magento, d'accéder à la base etc.</p>

<p>Et surtout... il faut bien l'avouer, pouvoir accéder à la config, aux modèles et autres collections... bah c'est quand même bien pratique !</p>

<!-- 




<hr />


<p>Tout d'abord il faut déterminer un endroit où nous pouvons stocker nos scripts...</p>

<p>J'ai pour habitude de faire un répertoire <code>/misc</code>. Alors je vais la garder et c'est dans ce répertoire que nous allons créer nos fichiers.</p>

<pre><code>$ mkdir misc
$ vim misc/change_admin_password.php
</code></pre>

<p>Tant qu'à faire... autant réaliser un script pratique :)</p>

<p>On commence donc par charger Magento :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>

<span class="c1">// Mage !</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../app/Mage.php&#39;</span><span class="p">;</span>

<span class="c1">// Init Magento</span>
<span class="nx">Mage</span><span class="o">::</span><span class="na">app</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">);</span>

<span class="c1">// Init store (needed for save products for example)</span>
<span class="nx">Mage</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setCurrentStore</span><span class="p">(</span><span class="nx">Mage_Core_Model_App</span><span class="o">::</span><span class="na">ADMIN_STORE_ID</span><span class="p">);</span>
</code></pre></div>


<p>Peut-être qu'avant ça il serait préférable de tester la validiter de notre ligne de commande ?</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>

<span class="c1">// Usage function :)</span>
<span class="k">function</span> <span class="nf">usage</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;Usage: php -f &quot;</span> <span class="o">.</span> <span class="nb">basename</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot; &lt;username&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">(</span><span class="mi">65</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Check command line</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$argc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">usage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>


<p>Une fois qu'on a notre utilisateur, on le charge et on vérifie qu'il existe bien :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>

<span class="c1">// We get the user</span>
<span class="nv">$user</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">getModel</span><span class="p">(</span><span class="s1">&#39;admin/user&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="nv">$argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;username&#39;</span><span class="p">);</span>

<span class="c1">// User exists?</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;Bad username.</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="nx">usage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>


<p>Ensuite on demande le mot de passe et on met à jour l'utilisateur :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>

<span class="c1">// We ask for the password</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;Which password? &quot;</span><span class="p">;</span>
    <span class="nv">$password</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">));</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nv">$password</span><span class="p">);</span>

<span class="c1">// We change the user password :)</span>
<span class="nv">$user</span><span class="o">-&gt;</span><span class="na">setNewPassword</span><span class="p">(</span><span class="nv">$password</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

<span class="k">echo</span> <span class="s2">&quot;User updated</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="k">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</code></pre></div>


<p>On exécute :</p>

<pre><code>$ php misc/change_admin_password.php jacques
Which password? monSuperPassword      
User updated
$
</code></pre>

<hr />


<p>Voilà ce que ça donne :</p>

<script src="https://gist.github.com/3139595.js?file=misc-change_admin_password.php"></script>




<hr />


<p>Sauf qu'on a un problème... Là le script est super simple.</p>

<p>Et pour régler votre urgence vous avez besoin de vous mettre dans un environnement de "setup". En gros vous voulez être comme dans le fameux <code>mysql4-install-0.1.0.php</code> ;)</p>

<p>Pour récupérer un setup de l'EAV par exemple (pour pouvoir faire des <code>getAttributeId</code>) :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="nv">$setup</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">getModel</span><span class="p">(</span><span class="s1">&#39;eav/entity_setup&#39;</span><span class="p">,</span> <span class="s1">&#39;eav&#39;</span><span class="p">);</span>

<span class="c1">// Op le SQL !</span>
<span class="c1">// $setup-&gt;run($sql);</span>
</code></pre></div>


<p>Pour récupérer une connection et une ressource :</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="nv">$res</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">getSingleton</span><span class="p">(</span><span class="s1">&#39;core/resource&#39;</span><span class="p">);</span>
<span class="nv">$cn</span> <span class="o">=</span> <span class="nv">$res</span><span class="o">-&gt;</span><span class="na">getConnection</span><span class="p">(</span><span class="s1">&#39;core_write&#39;</span><span class="p">);</span>

<span class="c1">// Nom d&#39;une table ?</span>
<span class="c1">// $res-&gt;getTableName(&#39;foo&#39;);</span>

<span class="c1">// Un select ? (Zend_Db_Select)</span>
<span class="c1">// $select = $cn-&gt;select();</span>
</code></pre></div>


<p>Voilà, à vous de jouer ! Et n'hésitez pas à partager vos scripts dans les commentaires, c'est toujours bon à prendre :)</p>

 -->





    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/realisez-vos-propres-scripts-php-sur-magento.html" data-text="Les scripts Magento" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/realisez-vos-propres-scripts-php-sur-magento.html#disqus_thread">Commentaires</a> -
        

        <a href="/realisez-vos-propres-scripts-php-sur-magento.html">Lire la suite du tutoriel</a>

    </div>

    <hr />
    <h2><a href="/creer-un-email-transactionnel-sur-magento.html">Les emails customs sur Magento</a></h2>
    <div class="content post">
        <p>Qui n'a pas voulu envoyer un email personnalisé rapidement via Magento ?</p>

<p>Les utilisations sont variées :</p>

<ul>
<li>Offrir un code promo à l'inscription</li>
<li>Informer le visiteur que son inscription à votre jeu concours est prise en compte</li>
<li>Annoncer au client que vous venez de lui offrir un produit pour sa prochaine commande car c'est son anniversaire</li>
<li>...</li>
</ul>


<p>Vous voulez faire ça ? Allez.. je vous aide :)</p>

<!-- 




<hr/>


<p>Le but de ce tutoriel est de vous montrer comment envoyer un email simplement depuis votre application.</p>

<p>Il s'agit d'envoyer un email transactionnel, pas une newsletter !</p>

<p>On va donc envoyer un email comprenant quelques informations sur le client (son nom par exemple) ainsi qu'un petit message.</p>

<h2>Le mail</h2>

<p>Sans trop se prendre la tête, voici le mail que nous voulons envoyer :</p>

<pre><code>Bonjour {name},

Aujourd'hui est un jour spécial.

Toute l'équipe de {nom de la boutique} vous souhaite un joyeux anniversaire !

A bientôt sur notre boutique,

L'équipe de {nom de la boutique}
</code></pre>

<p>En soit rien de compliqué, si ?</p>

<p>Nous utiliserons un email au format <em>texte</em>. Vous verrez qu'il ne sera pas bien compliqué de transformer ce mail dans une version colorée en HTML.</p>

<h3>C'est quoi son nom ?</h3>

<p>Pour bien comprendre le truc, il faut que nous donnions un nom à notre email.</p>

<p>On va donc prendre le nom de notre module (<em>Jbh_Demo</em>) et y ajouter le mot <em>email</em> avec à la fin le nom "réel" de notre email : <em>happyday</em>.</p>

<pre><code>    jbh_demo
             email
                   happyday
==&gt; jbh_demo/email/happyday
==&gt; jbh_demo_email_happyday
</code></pre>

<p>Ok... Mais l'identifiant qu'on vient de créer, il sert à quoi ?</p>

<p>Le premier c'est l'identifiant de la configuration qui permettra d'échanger l'email en dur (dans le fichier html) avec un email créé manuellement (via l'admin).</p>

<p>Le second c'est l'identifiant de notre email, en général.</p>

<h2>La config</h2>

<p>Editons notre fichier <code>/app/code/local/Jbh/Demo/etc/config.xml</code>.</p>

<script src="https://gist.github.com/3132212.js?file=app-code-local-Jbh-Demo-etc-config.xml"></script>


<p>Une partie <code>template</code> dans <code>global</code> consiste à indiquer à Magento que nous avons un nouvel email transactionnel dans l'application.</p>

<p>La partie <code>default</code> permet d'avoir en config l'identifiant de notre email. Vous remarquerez que la hiérarchie de la configuration par défaut suit parfaitement le schéma expliqué un peu plus haut : <code>jolie_demo &gt; email &gt; happyday</code>.</p>

<p>N'oubliez pas le fichier <code>/app/etc/modules/Jbh_Demo.xml</code> :)</p>

<script src="https://gist.github.com/3132212.js?file=app-etc-modules-Jbh_Demo.xml"></script>


<h2>Notre fichier email</h2>

<p>Editons notre fichier <code>/app/locale/fr_FR/template/email/jbh_demo/happyday.html</code> :</p>

<p>Nous avons besoin de respecter la syntaxe des emails sur Magento :</p>

<ul>
<li>Un titre avec la balise <code>&lt;!--@subject Jouyeux anniversaire ! @--&gt;</code></li>
<li>Un style optionnel avec la balise <code>&lt;!--@styles ... ici mon css ... @--&gt;</code></li>
<li>Un contenu avec ou sans variables</li>
</ul>


<p>Je vous laisse le soin de regarder les autres emails pour comprendre l'utilisation des variables. Ici nous feront juste en sorte que nos textes soient protégés.</p>

<script src="https://gist.github.com/3132212.js?file=app-locale-fr_FR-template-email-jbh_demo-happyday.html"></script>


<h2>Notre modèle</h2>

<p>Editons maintenant notre fichier <code>/app/code/local/Jbh/Demo/Model/Email.php</code> :</p>

<p>Il s'agit d'un simple modèle avec une méthode qui envoie un email au client passé en paramètre.</p>

<p>On notera la présence de deux constantes. Comme on le fait dans Magento, on utilise des constantes pour indiquer les chemins vers les variables de configuration. Ici nous avons les chemins vers le template et l'expéditeur du mail.</p>

<script src="https://gist.github.com/3132212.js?file=app-code-local-Jbh-Demo-Model-Email.php"></script>


<h2>Et ensuite ?</h2>

<p>Bah ensuite... il faut utiliser notre modèle !</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>

<span class="cm">/* @var $customer Mage_Customer_Model_Customer */</span>

<span class="nx">Mage</span><span class="o">::</span><span class="na">getSingleton</span><span class="p">(</span><span class="s1">&#39;jbh_demo/email&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">happyday</span><span class="p">(</span><span class="nv">$customer</span><span class="p">);</span>
</code></pre></div>


<p>Voilà ! Vous savez maintenant créer des emails rapidement.
Rien de bien compliqué en fait !</p>

<p>Vous avez des questions ? Des remarques ? Les commentaires sont là pour ça.</p>

 -->



    </div>
    <div class="voirPlus">
        <div class="social">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jacques.sh/creer-un-email-transactionnel-sur-magento.html" data-text="Les emails customs sur Magento" data-via="jacquesbh">Tweet</a>
        </div>
        
        <a href="/creer-un-email-transactionnel-sur-magento.html#disqus_thread">Commentaires</a> -
        

        <a href="/creer-un-email-transactionnel-sur-magento.html">Lire la suite du tutoriel</a>

    </div>


<div class="pagination">
    <hr/>
    
    
    
    <a href="/page5" class="previous">Précédent</a>
    
    –
    
    
    <span class="page_number">Page 6 sur 7</span>
    
    
    –
    <a href="/page7" class="next">Suivant</a>
    
    
</div>



</div>

<script type="text/javascript">
    var disqus_shortname = 'jacquesbh';
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



    </div>

    <div id="bottomWrap">
        <div id="contactWrap">
            <form action="#" method="post" id="contact_form">
                <h3>Contact</h3>
                <p>
                    <label for="contactNom">Votre nom</label>
                    <input type="text" name="contact_name" id="contact_name" class="text" tabindex="1" />
                </p>
                <p>
                    <label for="contactEmail">Votre email</label>
                    <input type="email" name="contact_email" id="contact_email" class="text" tabindex="2" />
                </p>
                <p>
                    <label for="contactMessage">Message</label>
                    <textarea name="contact_message" id="contact_message" rows="5" cols="30" tabindex="8"></textarea>
                </p>
                <p class="send">
                    <input type="hidden" name="redirect_to" value="http://jacques.sh/contact/thanks.html" />
                    <input type="submit" id="contactSend" value="Envoyer" tabindex="9" />
                </p>
                <div style="display: none;" class="url">http://getsimpleform.com/messages?form_api_token=4ba030c3b67553e1ccb25710aee63bd6</div>
            </form>
            <div class="qrcode">
                <h3>Mon QRcode</h3>
                <p>
                    <img src="/img/qrcode.png" alt="le QRcode" width="198" height="192" />
                </p>
            </div>
        </div>

        <div id="footerWrap">
            <div class="social">
                <a href="https://twitter.com/jacquesbh" class="twitter-follow-button" data-show-count="false">Follow @jacquesbh</a>
            </div>
            
            <a href="http://monsieurbiz.com" title="Découvrez Monsieur Biz, une agence spécialisée sur Magento, solution e-commerce">Agence Magento</a>
            | 

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
            
            <a href="/credits.html">Crédits</a>
        
    

    
        
    

    
        
    

    
        
            |
            <a href="/legals.html">Informations légales</a>
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    

    
        
    





            | <a href="/atom.xml">RSS</a>
            | <a href="#" id="toplink">Haut de page</a>
            <br />
            <span class="copy">&copy; Jacques Bodin-Hullin - 2014</span>
        </div>
    </div>

</div>




  <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27192340-2', 'auto');
  ga('send', 'pageview');

</script>






<script type="text/javascript" src="/js/jquery/cookies.js"></script>
    <div id="popin" class="monsieurbiz-popin" style="display: none;">
        <img src="/img/monsieurbiz.png" alt="" height="250" style="height: 250px;" />
        <h2><span class="lines">Un projet, Une agence</span></h2>
        <div class="action">
            <p>
                Monsieur Biz, une agence spécialisée Magento pour votre projet.
            </p>
            <a href="http://monsieurbiz.com">
                <div class="button1">C'est par ici que ça se passe !</div>
            </a>
        </div>
    </div>

    <script type="text/javascript">
    if (typeof disable_popin === 'undefined' || !disable_popin) {
        (function ($) {
            $(document).ready(function () {
                var cookieId = 'monsieurbizPopinDisplayed';
                if ($.cookie(cookieId) == null) {
                    $.fancybox.open('#popin');
                    $.cookie(cookieId, 'true');
                }
            });
         })(jQuery);
    }
    </script>


<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

</body>
</html>

